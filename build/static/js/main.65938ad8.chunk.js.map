{"version":3,"sources":["Components/ContentWrapper.tsx","Components/Footer.tsx","Components/Header.tsx","Components/Layout.tsx","Components/ScrollContent.tsx","util/network.ts","hooks/useAuth.ts","Components/SiderBar.tsx","Components/SiderLink.tsx","Components/SiderTitle.tsx","Components/Sider.tsx","Components/Carousel.tsx","hooks/useBanner.ts","Components/Arrow.tsx","Components/Title.tsx","Components/RecommendList.tsx","Components/PrivateContent.tsx","hooks/useAudio.ts","util/context.ts","Components/NewSongsList.tsx","Components/RecommendMv.tsx","Components/Tab.tsx","Components/TabBar.tsx","Components/RecommendTabs.tsx","Components/Categories.tsx","Components/MusicLists.tsx","Components/LatestSongs.tsx","Components/MusicPlayer.tsx","Components/Videos.tsx","Components/VideoPlayer.tsx","util/math.ts","Components/MusicList.tsx","App.tsx","hooks/useMount.ts","index.tsx"],"names":["ContentWrapper","styled","div","StyledDiv","Footer","props","children","Header","header","HeaderContent","Layout","StyledMain","main","hasTitle","ScrollContent","location","useLocation","pathname","indexOf","fetcher","a","fetch","then","res","json","logout","login","phone","password","LoginStatusContext","createContext","loginStatus","uid","StyledAside","aside","SiderBar","activated","StyledLink","Link","SiderLink","text","path","onClick","history","useHistory","push","to","SiderTitle","linkData","linkDataLogin","Sider","useState","loginData","useContext","useSWR","listData","data","error","map","i","playlist","item","id","name","StyledSlider","Slider","StyledContainer","img","Carousel","bannerData","useBanner","banners","imageUrl","CircularProgress","StyledArrowLeft","ArrowBackIosIcon","StyledArrowRight","ArrowForwardIosIcon","StyledTypo","span","Title","className","StyledListPic","width","height","bdr","src","defaultData","Array","fill","RecommendList","result","picUrl","PrivateContent","sPicUrl","audio","Audio","useAudio","MusicContext","setArtists","setName","setDuration","setUrl","url","artists","duration","songIds","setSongIds","currI","setCurrI","StyledImg","NewSongsList","useEffect","index","song","pause","artist","join","StyeldDiv","RecommendMv","Tab","title","TabBar","tabMap","RecommendTabs","tab","setTab","match","useRouteMatch","useLayoutEffect","length","arr","vidCats","VidCategories","currCat","setCurrCat","slice","Categories","cats","sub","MusicLists","setCurrCatMemo","useCallback","offset","setOffset","loading","setLoading","playlists","setPlaylists","divRef","useRef","intersectionObserverRef","newPlaylists","$node","current","IntersectionObserver","entries","console","log","isIntersecting","val","observe","unobserve","disconnect","e","coverImgUrl","ref","style","StatusTab","type","StyledButton","Button","PlayButton","startIcon","LatestSongs","songId","setSongId","setType","derivedData","useMemo","album","blurPicUrl","artistsName","minutes","Math","floor","seconds","type_","first","albumName","dur","backgroundColor","MusicPlayer","enable","setEnable","progress","setProgress","volume","setVolume","undefined","urlData","setUrlData","paused","setPaused","crossOrigin","listener1","listener2","listener3","listener4","currentTime","addEventListener","removeEventListener","IconButton","newVal","SkipPrevious","disabled","play","PlayArrow","Pause","SkipNext","VolumeUp","onChange","_","value","JSON","stringify","Videos","videos","setVideos","find","datas","coverUrl","vid","f","u","r","urls","Promise","all","VideoPlayer","times","useParams","controls","playTime","getDur","StyledTable","Table","getSongIds","trackIds","MusicList","trackIdsUrl","reduce","accumulator","currentValue","getTrackIdsUrl","tracks","songs","al","ar","dt","albumPicUrl","artistName","Avatar","creator","avatarUrl","nickname","TableHead","TableCell","align","sx","paddingRight","TableBody","TableRow","StyledAvatar","StyledNickName","Typography","theme","createTheme","palette","primary","red","App","fn","psw","open","setOpen","errTextField","setErrTextField","document","cookie","setLoginStatus","setUid","user","cookie_","window","localStorage","getItem","uid_","parseInt","handleClickOpen","handleLogout","code","removeItem","Provider","ThemeProvider","alt","profile","variant","LogoutOutlined","LoginOutlined","renderHeader","Box","flexBasis","display","dots","infinite","slidesToShow","slidesToScroll","autoplay","autoplaySpeed","nextArrow","prevArrow","state","from","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","label","fullWidth","target","helperText","DialogActions","account","setItem","ReactDOM","render","StrictMode","getElementById"],"mappings":"4QASaA,EAPKC,IAAOC,IAAV,0F,OCCTC,EAAYF,IAAOC,IAAV,iPAgBFE,EAAS,SAACC,GACrB,OAAO,cAAC,EAAD,UAAYA,EAAMC,YCCdC,EAlBMN,IAAOO,OAAV,yWAmBHC,EAAgBR,IAAOC,IAAV,uGCnBbQ,EAAST,IAAOC,IAAV,+E,QCGbS,EAAaV,IAAOW,KAAV,iFAEL,SAACP,GAAD,OACTA,EAAMQ,SAAN,6CACc,SAACR,GAAD,OAAYA,EAAMQ,SAAN,iBAEtBV,EAAYF,IAAOC,IAAV,0eAwBFY,EAAgB,SAAC,GAAyB,IAAvBR,EAAsB,EAAtBA,SACzBS,EAAWC,cACjB,OACC,cAACL,EAAD,CAAYE,UAAsD,IAA5CE,EAASE,SAASC,QAAQ,aAAhD,SACC,cAAC,EAAD,UAAYZ,O,iCCxCFa,EAAO,uCAAG,sCAAAC,EAAA,+EACZC,MAAK,WAAL,KAAeC,MAAK,SAACC,GAAD,OAASA,EAAIC,WADrB,2CAAH,qDCKPC,EAAM,uCAAG,sBAAAL,EAAA,sEACPD,EAAQ,WADD,mFAAH,qDAGNO,EAAK,uCAAG,WAAOC,EAAeC,GAAtB,eAAAR,EAAA,sEACDC,MAAM,0BAAD,OACKM,EADL,qBACuBC,IAC5CN,MAAK,SAACC,GAAD,OAASA,EAAIC,UAHD,cACbD,EADa,yBAIZA,GAJY,2CAAH,wDAeLM,EAAqBC,wBAA2C,CAACC,aAAY,EAAMC,IAAI,OCrB9FC,EAAchC,IAAOiC,MAAV,yIAQX/B,EAAYF,IAAOC,IAAV,ocA0BFiC,EAAW,SAAC9B,GACxB,OACC,cAAC4B,EAAD,UACC,cAAC,EAAD,UAAY5B,EAAMC,c,QCpCfH,EAAYF,IAAOC,IAAV,gUACM,SAACG,GAAD,OACnBA,EAAM+B,UAAY,mBAAqB,WAKzB,SAAC/B,GAAD,OAAYA,EAAM+B,UAAY,OAAS,SASjDC,EAAapC,YAAOqC,IAAPrC,CAAH,oJAcHsC,EAAY,SAAC,GAA+C,IAA7CC,EAA4C,EAA5CA,KAAMC,EAAsC,EAAtCA,KAAML,EAAgC,EAAhCA,UAAWM,EAAqB,EAArBA,QAC9CC,EAAUC,cAKd,OACC,cAAC,EAAD,CAAiBJ,OAAMC,OAAML,YAAaM,QALvB,WACnBC,EAAQE,KAAKJ,GACbC,GAAWA,KAGX,SACC,cAACL,EAAD,CAAYS,GAAIL,EAAhB,SAAuBD,OCxCbO,EAAa9C,IAAOC,IAAV,oJCOjB8C,EAAW,CAChB,CAAEP,KAAM,aAAcD,KAAM,4BAC5B,CAAEC,KAAM,UAAWD,KAAM,iBAEpBS,EAAgB,CACrB,CAAER,KAAM,aAAcD,KAAM,4BAC5B,CAAEC,KAAM,UAAWD,KAAM,gBACzB,CAAEC,KAAM,KAAMD,KAAM,6BAERU,EAAQ,WAAO,IAAD,EAC1B,EAA0BC,mBAAS,GAAnC,mBACMC,GADN,UACkBC,qBAAWxB,IAC7B,EAAkCyB,aACjC,8CAA4BF,EAAUpB,OACtCb,GAFaoC,EAAd,EAAQC,KAIFzC,GAJN,EAAwB0C,MAIPzC,eAEjB,OACC,eAAC,EAAD,YACGoC,EAAUrB,aACXiB,EAASU,KAAI,WAAiBC,GAAO,IAArBlB,EAAoB,EAApBA,KAAMD,EAAc,EAAdA,KACrB,OACC,cAAC,EAAD,CAECC,KAAMA,EACND,KAAMA,EACNJ,WAAgD,IAArCrB,EAASE,SAASC,QAAQuB,IAHhCD,MAORY,EAAUrB,aACVkB,EAAcS,KAAI,WAAiBC,GAAO,IAArBlB,EAAoB,EAApBA,KAAMD,EAAc,EAAdA,KAC1B,OAAIC,EAEF,cAAC,EAAD,CAECA,KAAMA,EACND,KAAMA,EACNJ,WACsC,IAArCrB,EAASE,SAASC,QAAQuB,IAJtBD,GAQI,cAACO,EAAD,UAAwBP,GAAPA,MAK9BY,EAAUrB,aACVwB,IADA,OAEAA,QAFA,IAEAA,GAFA,UAEAA,EAAUK,gBAFV,aAEA,EAAoBF,KAAI,SAACG,GACxB,OACC,cAAC,EAAD,CAECpB,KAAI,gBAAWoB,EAAKC,IACpBtB,KAAMqB,EAAKE,KACX3B,WAA8D,IAAnDrB,EAASE,SAASC,QAAlB,gBAAmC2C,EAAKC,MAH9CD,EAAKC,Y,wRCvDX3D,GAAYF,IAAOC,IAAV,+TAiBT8D,GAAe/D,YAAOgE,KAAPhE,CAAH,4BAIZiE,GAAkBjE,IAAOC,IAAV,qJAKI,SAACG,GAAD,OAAWA,EAAM8D,OAO7BC,GAAW,SAAC/D,GACxB,IAAQgE,ECtCF,WACH,MAAoCf,YAAO,UAAWnC,GACtD,MAAO,CAAEkD,WADT,EAAQb,KACaC,MADrB,EAA0BA,ODqCNa,GAAfD,WACR,OACC,cAAC,GAAD,UACEA,EACA,cAACL,GAAD,6BAAkB3D,GAAlB,aACEgE,EAAWE,QAAQb,KAAI,SAACS,GAExB,OACC,cAACD,GAAD,CAECC,IAAKA,EAAIK,UADJL,EAAIK,gBAOb,cAACC,GAAA,EAAD,O,yCEnDSC,GAAkBzE,YAAO0E,KAAP1E,CAAH,oFAIf2E,GAAmB3E,YAAO4E,KAAP5E,CAAH,iE,UCLvB6E,GAAa7E,IAAO8E,KAAV,4WAuBHC,GAAQ,SAAC3E,GACrB,IAAMsC,EAAUC,cAChB,OACC,eAACkC,GAAD,CACCpC,QAAS,WACRrC,EAAMyC,IAAMH,EAAQE,KAAKxC,EAAMyC,KAFjC,UAKC,+BAAOzC,EAAMC,WACb,sBAAM2E,UAAU,OAAhB,SACC,cAAC,KAAD,UC/BEf,GAAkBjE,IAAOC,IAAV,yZAyBRgF,GAAgBjF,IAAOC,IAAV,8KACb,SAACG,GAAD,OAAYA,EAAM8E,MAAN,UAAiB9E,EAAM8E,MAAvB,OAAoC,WAC/C,SAAC9E,GAAD,OAAYA,EAAM+E,OAAN,UAAkB/E,EAAM+E,OAAxB,OAAsC,WAC5C,SAAC/E,GAAD,OAAYA,EAAMgF,IAAN,UAAehF,EAAMgF,IAArB,OAAgC,UACpC,SAAChF,GAAD,OAAWA,EAAMiF,IAAIjF,EAAMiF,IAAI,kBAIrDC,GAAc,IAAIC,MAAM,IAAIC,KAAK,MAC1BC,GAAgB,WACzB,MAAwBpC,YAAO,yBAA0BnC,GAAjDqC,EAAR,EAAQA,KACFb,GADN,EAAcc,MACAb,eACd,OACI,cAAC,GAAD,WACS,OAAJY,QAAI,IAAJA,OAAA,EAAAA,EAAMmC,QACDnC,EAAKmC,OAAOjC,KAAI,SAACG,GACb,OACI,sBAAKoB,UAAU,OAAf,UACI,cAACC,GAAD,CAAeI,IAAKzB,EAAK+B,OAAQlD,QAAS,WAAKC,GAASA,EAAQE,KAAR,gBAAsBgB,EAAKC,QACnF,cAAC,IAAD,CAAMmB,UAAU,OAAOnC,GAAE,gBAAWe,EAAKC,IAAzC,SAA+C,+BAAOD,EAAKE,eAIvEwB,GAAY7B,KAAI,kBAAM,cAACe,GAAA,EAAD,UChDlCtE,GAAYF,IAAOC,IAAV,sTAeTqF,GAAc,IAAIC,MAAM,GAAGC,KAAK,MACzBI,GAAiB,SAACxF,GAC3B,MAAwBiD,YAAO,+BAAgCnC,GAAvDqC,EAAR,EAAQA,KAAR,EAAcC,MAEd,OACI,cAAC,GAAD,WACS,OAAJD,QAAI,IAAJA,OAAA,EAAAA,EAAMmC,QACDnC,EAAKmC,OAAOjC,KAAI,SAACG,GACb,OACI,sBAAKoB,UAAU,OAAf,UACI,cAACC,GAAD,CAAeI,IAAKzB,EAAKiC,QAASX,MAAO,GAAIC,OAAQ,KACrD,+BAAOvB,EAAKE,aAIxBwB,GAAY7B,KAAI,kBAAM,cAACe,GAAA,EAAD,UCnCpCsB,GAAM,IAAIC,MAEDC,GAAW,WACpB,OAAOF,ICWEG,GAAepE,wBAAqC,CAChEiC,KAAM,GACNoC,WAAY,aACZC,QAAS,aACTC,YAAa,aACbC,OAAQ,aACRC,IAAK,GACLC,QAAS,GACTC,SAAU,GACVC,QAAS,GACTC,WAAY,aACZC,OAAO,EACPC,SAAS,eCrBJ1G,GAAYF,IAAOC,IAAV,olBAgCT4G,GAAY7G,IAAOC,IAAV,sHAIU,SAACG,GAAD,OAAWA,EAAMiF,OAG7ByB,GAAe,WAC3B,MAAwBzD,YAAO,iCAAkCnC,GAAzDqC,EAAR,EAAQA,KACR,GADA,EAAcC,MAEbJ,qBAAW6C,KADSC,GAArB,EAAQE,YAAR,EAAqBF,YAAYC,EAAjC,EAAiCA,QAASE,EAA1C,EAA0CA,OAAQO,EAAlD,EAAkDA,SAAUD,EAA5D,EAA4DA,MAAMD,EAAlE,EAAkEA,WAE/DK,qBAAU,WACJxD,GACCmD,EAAWnD,EAAKmC,OAAOjC,KAAI,SAACG,GAAD,OAAcA,EAAKC,SAElD,CAACN,IACJ,IAAMuC,EAAQE,KACjB,OACC,cAAC,GAAD,UACEzC,EACEA,EAAKmC,OAAOjC,KAAI,SAACG,EAAUoD,GAC3B,OACC,sBACChC,UAAWgC,IAAQL,EAAM,eAAe,QACxClE,QAAS,WACR4D,EAAOzC,EAAK+B,QACZQ,EAAQvC,EAAKE,MACboC,EAAWtC,EAAKqD,KAAKV,QAAQ,GAAGzC,MAChC8C,EAASI,GACkBlB,EAAMoB,SAPnC,UAUC,cAACL,GAAD,CAAWxB,IAAKzB,EAAK+B,SACrB,sBAAKX,UAAU,QAAf,UACC,sBAAMA,UAAU,OAAhB,SAAwBpB,EAAKE,OAC7B,sBAAMkB,UAAU,SAAhB,SACEpB,EAAKqD,KAAKV,QACT9C,KAAI,SAAC0D,GAAD,OAAiBA,EAAOrD,QAC5BsD,KAAK,gBAMX,IAAI7B,MAAM,IAAIC,KAAK,MAAM/B,KAAI,kBAAM,cAACe,GAAA,EAAD,UC5EnC6C,GAAYrH,IAAOC,IAAV,2bAqBFqH,GAAc,WACvB,IAAQ/D,EAASF,YAAO,mBAAoBnC,GAApCqC,KACR,OACI,cAAC8D,GAAD,UACK9D,EACKA,EAAKmC,OAAOjC,KAAI,SAACG,GACb,OACI,sBAAKoB,UAAU,KAAf,UACI,cAACC,GAAD,CACII,IAAKzB,EAAK+B,OACVT,MAAO,GACPC,OAAQ,KAEZ,sBAAMH,UAAU,OAAhB,SAAwBpB,EAAKE,OAC7B,sBAAMkB,UAAU,UAAhB,SACKpB,EAAK2C,QACD9C,KAAI,SAAC0D,GAAD,OAAiBA,EAAOrD,QAC5BsD,KAAK,aAK1B,IAAI7B,MAAM,GAAGC,KAAK,MAAM/B,KAAI,kBACxB,qBAAKuB,UAAU,KAAf,SACI,cAACR,GAAA,EAAD,YChDpBtE,GAAYF,IAAOC,IAAV,6NACD,SAACG,GAAD,OAAYA,EAAM+B,UAAY,OAAS,UACrC,SAAC/B,GAAD,OAAYA,EAAM+B,UAAY,MAAQ,MAEpC,SAAC/B,GAAD,OAChBA,EAAM+B,UAAY,8BAAgC,MAgBvCoF,GAAM,SAAC,GAAwD,IAAtDC,EAAqD,EAArDA,MAAqD,IAA9CrF,iBAA8C,SAA3BM,EAA2B,EAA3BA,QAASD,EAAkB,EAAlBA,KACxD,OACC,cAAC,GAAD,CAAWL,UAAWA,EAAWM,QAASA,EAA1C,SACC,cAAC,IAAD,CAAMuC,UAAU,WAAWnC,GAAIL,EAA/B,SACEgF,OChBQC,GAZMzH,IAAOO,OAAV,sMCOVmH,GAAO,CACT,CACIF,MAAO,2BACPhF,KAAM,qBAEV,CACIgF,MAAO,eACPhF,KAAM,SAEV,CACIgF,MAAO,2BACPhF,KAAM,aAGDmF,GAAgB,SAACvH,GAC1B,MAAsB8C,mBAAiB,GAAvC,mBAAO0E,EAAP,KAAYC,EAAZ,KACMC,EAAMC,YAAcL,GAAOjE,KAAI,gBAAEjB,EAAF,EAAEA,KAAF,2BAAwBA,OAU7D,OATAwF,2BAAgB,WACb,IAAK,IAAIhB,EAAQ,EAAGA,EAAQU,GAAOO,OAAQjB,IAAS,CAChD,IAAOxE,EAAQkF,GAAOV,GAAfxE,KACP,IAAgC,KAAxB,OAALsF,QAAK,IAALA,OAAA,EAAAA,EAAOtF,KAAKvB,QAAQuB,IAAW,CAC9BqF,EAAOb,GACP,UAGR,CAACc,IAEA,cAACL,GAAD,UACCC,GAAOjE,KACJ,WAEIuD,EACAkB,GAHJ,IACMV,EADN,EACMA,MAAOhF,EADb,EACaA,KADb,OAKI,cAAC,GAAD,CAEIgF,MAAOA,EACPrF,UACIqF,IACAU,EAAIN,GAAKJ,MAEbhF,KAAMA,EACNC,QAAS,WACLoF,EAAOb,KARNQ,S,SCnCZW,GAAU,CACtB,CACCtE,GAAI,MACJC,KAAM,gBAEP,CACCD,GAAI,MACJC,KAAM,gBAEP,CACCD,GAAI,KACJC,KAAM,gBAEP,CACCD,GAAI,MACJC,KAAM,aAEP,CACCD,GAAI,KACJC,KAAM,gBAEP,CACCD,GAAI,KACJC,KAAM,gBAEP,CACCD,GAAI,MACJC,KAAM,mBAEP,CACCD,GAAI,KACJC,KAAM,6BAGKsE,GAAgB,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,WACpC,OACF,sBAAKtD,UAAU,SAAf,UACC,qBAAKA,UAAU,UAAf,SACC,qBAAKA,UAAU,WAAf,SACC,+BAAOqD,QAGRF,GAAQI,MAAM,EAAG,IAAI9E,KAAI,SAACG,GAAD,OACzB,qBAECoB,UAAS,mBACRpB,EAAKE,OAASuE,EAAU,WAAa,IAEtC5F,QAAS,WACR6F,EAAW1E,EAAKE,OANlB,SASEF,EAAKE,MARDF,EAAKE,aAcF0E,GAAa,SAAC,GAAoC,IAAlCH,EAAiC,EAAjCA,QAASC,EAAwB,EAAxBA,WACvBG,EAASpF,YAAO,oBAAqBnC,GAA3CqC,KACR,OACC,sBAAKyB,UAAU,SAAf,UACC,qBAAKA,UAAU,UAAf,SACC,qBAAKA,UAAU,WAAf,SACC,+BAAOqD,QAHV,OAMEI,QANF,IAMEA,OANF,EAMEA,EAAMC,IAAIH,MAAM,EAAG,IAAI9E,KAAI,SAACG,GAAD,OAC3B,qBAECoB,UAAS,mBACRpB,EAAKE,OAASuE,EAAU,WAAa,IAEtC5F,QAAS,WACR6F,EAAW1E,EAAKE,OANlB,SASEF,EAAKE,MARDF,EAAKE,aCpEFG,GAAkBjE,IAAOC,IAAV,upCA2Df0I,GAAa,WACzB,MAA8BzF,mBAAS,4BAAvC,mBAAOmF,EAAP,KAAgBC,EAAhB,KACMM,EAAiBC,sBAAYP,EAAY,CAACD,IAChD,EAA4BnF,mBAAS,GAArC,mBAAO4F,EAAP,KAAeC,EAAf,KACA,EAA8B7F,oBAAS,GAAvC,mBAAO8F,EAAP,KAAgBC,EAAhB,KACA,EAAkC/F,mBAAgB,IAAlD,mBAAOgG,EAAP,KAAkBC,EAAlB,KACMC,EAASC,iBAAuB,MAChCC,EAA0BD,iBAAoC,MAoDpE,OAlDAtC,qBAAU,WACT,sBAAC,8BAAA5F,EAAA,6DACA8H,GAAW,GADX,SAEuB7H,MAAM,8BAAD,OACGiH,EADH,mBACqBS,IAC/CzH,MAAK,SAACC,GAAD,OAASA,EAAIC,UAJpB,OAEMD,EAFN,OAMmBiI,EAAiBjI,EAA5B4H,UACRC,EAAaI,GACbN,GAAW,GARX,0CAAD,KAUE,CAACZ,IAEJtB,qBAAU,WACL+B,GAAU,KACb,sBAAC,8BAAA3H,EAAA,6DACA8H,GAAW,GADX,SAEuB7H,MAAM,8BAAD,OACGiH,EADH,mBAEjB,GAATS,IAEAzH,MAAK,SAACC,GAAD,OAASA,EAAIC,UANpB,OAEMD,EAFN,OAQmBiI,EAAiBjI,EAA5B4H,UACRC,EAAa,GAAD,oBAAKD,GAAL,aAAmBK,KAC/BN,GAAW,GAVX,0CAAD,KAYC,CAACH,IAEJ/B,qBAAU,WACT,IAAMyC,EAAQJ,EAAOK,QAUrB,OATAH,EAAwBG,QAAU,IAAIC,sBACrC,SAACC,GACAC,QAAQC,IAAIF,GACRA,EAAQ,IAAMA,EAAQ,GAAGG,gBAC5Bf,GAAU,SAACgB,GAAD,OAAUA,GAAO,IAAM,IAAMA,EAAM,QAIhDT,EAAwBG,QAAQO,QAAQR,GACjC,WACN,IAAK,IAAD,IACH,UAAAF,EAAwBG,eAAxB,SAAiCQ,UAAUT,GAC3C,UAAAF,EAAwBG,eAAxB,SAAiCS,aAChC,MAAOC,GACRP,QAAQpG,MAAM2G,OAGd,CAACf,EAAOK,UAGV,eAAC,GAAD,WACC,cAAC,GAAD,CAAYnB,WAAYM,EAAgBP,QAASA,IACjD,qBAAKrD,UAAU,OAAf,SACEkE,EAAUzF,KACV,WAAgCuD,EAAOkC,GAAe,IAAnDkB,EAAkD,EAAlDA,YAAatG,EAAqC,EAArCA,KAAMD,EAA+B,EAA/BA,GACrB,OACC,sBAAKmB,UAAU,OAAf,UACC,cAACC,GAAD,CACCI,IAAK+E,IAEN,cAAC,IAAD,CAAMpF,UAAU,OAAOnC,GAAE,gBAAWgB,GAApC,SAA2CC,MAJjBA,QAU/B,qBAAKuG,IAAKjB,EAAQkB,MAAO,CAAEpF,MAAO,OAAQC,OAAQ,QAAlD,SACE6D,GAAW,cAACxE,GAAA,EAAD,U,qBClIHP,GAAkBjE,IAAOC,IAAV,qyDA2FtBsK,GAAYvK,IAAOC,IAAV,qFAIL,SAACG,GAAD,OAAYA,EAAM+B,UAAY,QAAU,UAE5CuF,GAAS,CACd,CACC8C,KAAM,EACNjI,KAAM,gBAEP,CACCiI,KAAM,EACNjI,KAAM,gBAEP,CACCiI,KAAM,GACNjI,KAAM,gBAEP,CACCiI,KAAM,EACNjI,KAAM,gBAEP,CACCiI,KAAM,GACNjI,KAAM,iBAGFkI,GAAezK,YAAO0K,KAAP1K,CAAH,oPAgBL2K,GAAa,SAAC,GAAkC,IAAhClI,EAA+B,EAA/BA,QAC5B,OACC,qBAAKuC,UAAU,MAAMvC,QAASA,EAA9B,SACC,cAACgI,GAAD,CAAcG,UAAW,cAAC,KAAD,IAAzB,yCAMUC,GAAc,WAC1B,MAA4B3H,mBAAS,GAArC,mBAAO4H,EAAP,KAAeC,EAAf,KACA,EASI3H,qBAAW6C,IARdQ,EADD,EACCA,QACAC,EAFD,EAECA,WACAN,EAHD,EAGCA,YACAF,EAJD,EAICA,WACAC,EALD,EAKCA,QACAE,EAND,EAMCA,OACAO,EAPD,EAOCA,SACAD,EARD,EAQCA,MAED,EAAwBzD,mBAAS,GAAjC,mBAAOsH,EAAP,KAAaQ,EAAb,KACc1J,EAAQ+B,YAAO,kBAAD,OAAmBmH,GAAQtJ,GAA/CqC,KACFuC,EAAQE,KAEde,qBAAU,WACTzF,GAAOoF,EAAWpF,EAAIiC,KAAKE,KAAI,qBAAGI,SAChC,CAACvC,IACJ,IAAM2J,EAAcC,mBAAQ,WAC3B,OACC5J,IAAG,OACHA,QADG,IACHA,OADG,EACHA,EAAKiC,KAAKE,KACT,WAECuD,GACK,IAFHlD,EAEE,EAFFA,KAAMqH,EAEJ,EAFIA,MAAO5E,EAEX,EAFWA,QAAS1C,EAEpB,EAFoBA,GAAI2C,EAExB,EAFwBA,SAGRb,EAA4BwF,EAAxCC,WACFC,GAD0CF,EAApBrH,KACRyC,EAClB9C,KAAI,SAAC0D,GAAD,OAAiBA,EAAOrD,QAC5BsD,KAAK,MAEDkE,EAAUC,KAAKC,MAAMhF,EAAW,KAChCiF,EAAUF,KAAKC,MAAMhF,EAAW,KAAkB,GAAV8E,EAC9C,MAAO,CACNzH,KACAwH,cACAvH,OACAwC,IAAKX,EACLa,SAAS,GAAD,OAAK8E,EAAL,YACPG,EAAU,GAAV,WAAmBA,GAAYA,UAMlC,CAACnK,IAaJ,OAXAyF,qBAAU,WACT,GAAIkE,EAAa,CAChB,IAAMrH,EAAOqH,EAAYtE,GACzBiD,QAAQC,IAAIjG,GACZuC,EAAQvC,EAAKE,MACbsC,EAAYxC,EAAK4C,UACjBN,EAAWtC,EAAKyH,aAChBhF,EAAOzC,EAAK0C,QAEX,CAACK,IAGH,eAAC,GAAD,WACC,sBAAK3B,UAAU,SAAf,UACC,qBAAKA,UAAU,aAAf,SACE0C,GAAOjE,KAAI,YAA4B,IAAnBiI,EAAkB,EAAxBlB,KAAajI,EAAW,EAAXA,KAC3B,OACC,cAACgI,GAAD,CACC9H,QAAS,WACRuI,EAAQU,IAETvJ,UAAWqI,IAASkB,EAJrB,SAMEnJ,SAKL,cAAC,GAAD,CACCE,QAAS,WACR,GAAIwI,EAAa,CAChB,IAAMU,EAAQV,EAAY,GAC1BrB,QAAQC,IAAI8B,GACZxF,EAAQwF,EAAM7H,MACdsC,EAAYuF,EAAMnF,UAClBN,EAAWyF,EAAMN,aACjBhF,EAAOsF,EAAMrF,KACbsD,QAAQC,IAAI,SAEbvI,GAAOyJ,EAAUzJ,EAAIiC,KAAK,GAAGM,IAC7B,IAAMH,EAAI+C,EAAQxF,QAAQ6J,GACtBpH,GAAK,IACRkG,QAAQC,IAAI,YACZjD,EAASlD,UAMZpC,IAAG,OACHA,QADG,IACHA,OADG,EACHA,EAAKiC,KAAKE,KACT,WAECuD,GACK,IAFHlD,EAEE,EAFFA,KAAMqH,EAEJ,EAFIA,MAAO5E,EAEX,EAFWA,QAAS1C,EAEpB,EAFoBA,GAAI2C,EAExB,EAFwBA,SAGRb,EAA4BwF,EAAxCC,WAA0BQ,EAAcT,EAApBrH,KACtBuH,EAAc9E,EAClB9C,KAAI,SAAC0D,GAAD,OAAiBA,EAAOrD,QAC5BsD,KAAK,KAEDkE,EAAUC,KAAKC,MAAMhF,EAAW,KAChCiF,EACLF,KAAKC,MAAMhF,EAAW,KAAkB,GAAV8E,EACzBO,EAAG,UAAMP,EAAN,YACRG,EAAU,GAAV,WAAmBA,GAAYA,GAEhC,OACC,sBAECzG,UAAU,YACVsF,MAAO,CACNwB,gBAAgB,GAAD,OACd9E,EAAQ,IAAM,GAAK,YAGrBvE,QAAS,WACRsI,EAAUlH,GACVsC,EAAQrC,GACRoC,EAAWmF,GACXjF,EAAYyF,GACZxF,EAAOV,GACPiB,EAASI,GACTlB,EAAMoB,SAfR,UAkBET,EAAQE,KAAW9C,EACnB,cAAC,KAAD,CAAemB,UAAU,cAEzB,qBAAKA,UAAU,IAAf,SAAoBgC,IAErB,cAAC/B,GAAD,CACCC,MAAO,KACPC,OAAQ,KACRE,IAAKM,EACLP,IAAK,KAELqB,EAAQE,KAAW9C,EACnB,qBAAKmB,UAAU,WAAf,SAA2BlB,IAE3B,qBAAKkB,UAAU,OAAf,SAAuBlB,IAExB,qBAAKkB,UAAU,UAAf,SAA0BqG,IAC1B,qBAAKrG,UAAU,QAAf,SAAwB4G,IACxB,qBAAK5G,UAAU,MAAf,SAAsB6G,MAnCjBhI,QAwCRvC,GAAO,cAACkD,GAAA,EAAD,Q,gFCxSN/D,GAAST,IAAOC,IAAV,wtCAkEC8L,GAAc,WACzB,MACE3I,qBAAW6C,IADLnC,EAAR,EAAQA,KAAMyC,EAAd,EAAcA,QAAmBD,GAAjC,EAAuBE,SAAvB,EAAiCF,KAAKK,EAAtC,EAAsCA,MAAOF,EAA7C,EAA6CA,QAASG,EAAtD,EAAsDA,SAEhDd,EAAQE,KACd,EAA4B9C,oBAAS,GAArC,mBAAO8I,EAAP,KAAeC,EAAf,KACA,EAAgC/I,mBAAS,GAAzC,mBAAOgJ,EAAP,KAAiBC,EAAjB,KACA,EAA4BjJ,mBAAS,IAArC,mBAAOkJ,EAAP,KAAeC,EAAf,KACA,EAA8BnJ,wBAAcoJ,GAA5C,mBAAOC,EAAP,KAAgBC,EAAhB,KACAzF,qBAAU,WACXoF,EAAY,GACT,sBAAC,8BAAAhL,EAAA,2DACKwF,GAAS,GAAKF,GAAWA,EAAQwB,OAAS,GAD/C,uBAES6C,EAASrE,EAAQE,GAF1B,SAGqBvF,MAAM,gBAAD,OAAiB0J,IAAUzJ,MAAK,SAACC,GAAD,OACrDA,EAAIC,UAJT,OAGSD,EAHT,OAMGkL,EAAWlL,GANd,0CAAD,KASC,CAACmF,EAASE,IAEb,MAA4BzD,oBAAS,GAArC,mBAAOuJ,EAAP,KAAeC,EAAf,KAoCA,OAnCA3F,qBAAU,WACRjB,EAAM6G,YAAc,YAEpB,IAAMC,EAAY,WAChBF,GAAU,IAENG,EAAY,WAChBH,GAAU,IAENI,EAAY,WAChBlD,QAAQC,IAAI,WACZoC,GAAU,IAENc,EAAY,WAChBZ,EAAYZ,KAAKC,MAAO1F,EAAMkH,YAAclH,EAAMU,SAAY,OAMhE,OAJAV,EAAMmH,iBAAiB,OAAQL,GAC/B9G,EAAMmH,iBAAiB,QAASJ,GAChC/G,EAAMmH,iBAAiB,UAAWH,GAClChH,EAAMmH,iBAAiB,aAAcF,GAC9B,WACLjH,EAAMoH,oBAAoB,OAAQN,GAClC9G,EAAMoH,oBAAoB,QAASL,GACnC/G,EAAMoH,oBAAoB,UAAWJ,GACrChH,EAAMoH,oBAAoB,aAAcH,MAEzC,CAACR,IAEJxF,qBAAU,WACJwF,GAAWA,EAAQhJ,KAAK,KAC1BuC,EAAMT,IAAMkH,EAAQhJ,KAAK,GAAG+C,IAC5B2F,GAAU,MAEX,CAACM,IAGF,eAAC,GAAD,WACE,qBAAKvH,UAAU,WAAWsF,MAAO,CAAEpF,MAAM,GAAD,OAAKgH,EAAL,QACxC,sBAAKlH,UAAU,OAAf,UACE,cAACC,GAAD,CAAeC,MAAO,EAAGC,OAAQ,EAAGC,IAAK,GAAKC,IAAKiB,IACnD,sBAAKtB,UAAU,YAAf,UACE,qBAAKA,UAAU,OAAf,SAAuBlB,IACvB,qBAAKkB,UAAU,UAAf,SAA0BuB,UAG9B,qBAAKvB,UAAU,UAAf,SACE,sBAAKA,UAAU,OAAf,UACE,cAACmI,GAAA,EAAD,CACEnI,UAAU,WACVvC,QAAS,WACPqD,EAAMoB,QACfpB,EAAMT,IAAI,GACDqH,GAAU,GACVP,EAAY,GACZ,IAAMiB,EACJzG,EAAQ,EACJA,EAAQ,EAAIF,EAAQwB,QACnBtB,EAAQ,GAAKF,EAAQwB,OAC5BrB,EAASwG,IAXb,SAcE,cAACC,GAAA,EAAD,MAGAZ,EAaA,cAACU,GAAA,EAAD,CACEG,UAAWtB,EACXhH,UAAU,WACVvC,QAAS,WACH8J,GAAWA,EAAQhJ,MAAQgJ,EAAQhJ,KAAK,IAC1CuC,EAAMyH,QALZ,SASE,cAACC,GAAA,EAAD,MArBF,cAACL,GAAA,EAAD,CACEG,UAAWtB,EACXhH,UAAU,WACVvC,QAAS,WACH8J,GAAWA,EAAQhJ,MAAQgJ,EAAQhJ,KAAK,IAC1CuC,EAAMoB,SALZ,SASE,cAACuG,GAAA,EAAD,MAeJ,cAACN,GAAA,EAAD,CACEnI,UAAU,WACVvC,QAAS,WACP0J,EAAY,GACZrG,EAAMoB,QACfpB,EAAMT,IAAI,GACDqH,GAAU,GACV9F,GAAUD,EAAQ,GAAKF,EAAQwB,SAPnC,SAUE,cAACyF,GAAA,EAAD,WAIN,eAAC,KAAD,CAAK1I,UAAU,SAAf,UACE,cAAC2I,GAAA,EAAD,CAAU3I,UAAU,SACpB,cAAChB,GAAA,EAAD,CACE4J,SAAU,SAACC,EAAGT,GACU,kBAAXA,IACTtH,EAAMsG,OAASgB,EAAS,IACxBf,EAAUe,KAGdU,MAAO1B,SA5EA2B,KAAKC,UAAUzB,KCvI1BtI,GAAkBjE,IAAOC,IAAV,8oCA2DRgO,GAAS,SAAC7N,GACtB,MAA8B8C,mBAAS,4BAAvC,mBAAOmF,EAAP,KAAgBC,EAAhB,KACA,EAA4BpF,mBAAS,GAArC,mBAAO4F,EAAP,KAAeC,EAAf,KACA,EAA4B7F,mBAAgB,IAA5C,mBAAOgL,EAAP,KAAeC,EAAf,KACM/E,EAASC,iBAAuB,MAChCC,EAA0BD,iBAAoC,MACpE,EAA8BnG,oBAAS,GAAvC,mBAAO8F,EAAP,KAAgBC,EAAhB,KAgDA,OA9CAlC,qBAAU,WACT,sBAAC,gCAAA5F,EAAA,6DACA8H,GAAW,GACLrF,EAAOuE,GAAQiG,MAAK,qBAAGtK,OAAoBuE,KAFjD,SAGuBjH,MAAM,mBAAD,cACRwC,QADQ,IACRA,OADQ,EACRA,EAAMC,GADE,oBACqB,EAATiF,IACtCzH,MAAK,SAACC,GAAD,OAASA,EAAIC,UALpB,OAGMD,EAHN,OAMQ+M,EAAU/M,EAAV+M,MACRF,GAAU,SAACD,GAAD,6BAAgBA,GAAhB,aAA2BG,OACrCpF,GAAW,GARX,0CAAD,KAUE,CAACH,IACJ/B,qBAAU,WACT,sBAAC,gCAAA5F,EAAA,6DACSgN,EAAU,IACnBlF,GAAW,GACLrF,EAAOuE,GAAQiG,MAAK,qBAAGtK,OAAoBuE,KAHjD,SAIuBjH,MAAM,mBAAD,cACRwC,QADQ,IACRA,OADQ,EACRA,EAAMC,KACxBxC,MAAK,SAACC,GAAD,OAASA,EAAIC,UANpB,OAIMD,EAJN,OAOQ+M,EAAU/M,EAAV+M,MACRF,EAAUE,GACVpF,GAAW,GATX,0CAAD,KAWE,CAACZ,IAEJtB,qBAAU,WACT,IAAMyC,EAAQJ,EAAOK,QAUrB,OATAH,EAAwBG,QAAU,IAAIC,sBACrC,SAACC,GACAC,QAAQC,IAAIF,GACRA,EAAQ,IAAMA,EAAQ,GAAGG,gBAC5Bf,GAAU,SAACgB,GAAD,OAAUA,GAAO,IAAM,IAAMA,EAAM,QAIhDT,EAAwBG,QAAQO,QAAQR,GACjC,WACN,IAAK,IAAD,IACH,UAAAF,EAAwBG,eAAxB,SAAiCQ,UAAUT,GAC3C,UAAAF,EAAwBG,eAAxB,SAAiCS,aAChC,MAAOC,GACRP,QAAQpG,MAAM2G,OAGd,CAACf,EAAOK,UAEV,eAAC,GAAD,WACC,cAAC,GAAD,CACCpB,QAASA,EACTC,WAAYA,IAEb,qBAAKtD,UAAU,OAAf,SACEkJ,GACAA,EAAOzK,KAAI,WAAgBuD,GAAmB,IAAhCzD,EAA+B,EAA/BA,KACP+K,EAA8B/K,EAA9B+K,SAAU9G,EAAoBjE,EAApBiE,MAAO1D,EAAaP,EAAbO,KAAKyK,EAAQhL,EAARgL,IAI5B,OAHIzK,IACH0D,EAAQ1D,GAGR,sBAAKkB,UAAU,OAAf,UACC,cAACC,GAAD,CACCI,IAAKiJ,EACLpJ,MAAO,GACPC,OAAQ,IAET,qBAAKH,UAAU,OAAf,SACC,cAAC,IAAD,CAAMA,UAAU,OAAOnC,GAAE,kBAAa0L,GAAtC,SAA8C/G,QAPrBA,QAa/B,qBAAK6C,IAAKjB,EAAQkB,MAAO,CAAEpF,MAAO,OAAQC,OAAQ,QAAlD,SACE6D,GAAW,cAACxE,GAAA,EAAD,UC/IVP,GAAkBjE,IAAOC,IAAV,g1BA6CrB,SAASiB,KAA2B,IACnC,IAAMsN,EAAI,SAACC,GAAD,OAAerN,MAAMqN,GAAGpN,MAAK,SAACqN,GAAD,OAAOA,EAAEnN,WADb,mBAAhBoN,EAAgB,yBAAhBA,EAAgB,gBAGnC,GAAIA,EAAK1G,OAAS,EACjB,OAAO2G,QAAQC,IAAIF,EAAKlL,IAAI+K,IAIvB,I,eAAMM,GAAc,WAAO,IAAD,EAUVC,EAThBR,EAAQS,cAART,IACEhL,EAASF,YAChB,CAAC,wBAAD,OACyBkL,GADzB,2BAEqBA,GAFrB,wBAGkBA,IAElBrN,IANOqC,KAaR,OACC,eAAC,GAAD,WACC,sBAAKyB,UAAU,KAAf,UACC,qBAAKA,UAAU,QAAf,sCACCzB,GAAQA,EAAK,IACb,uBAAO2B,MAAO,IAAKC,OAAQ,IAAK8J,UAAQ,EAAxC,SACC,wBAAQ5J,IAAK9B,EAAK,GAAGoL,KAAK,GAAGrI,QAG9B/C,GAAQ,oBAAIyB,UAAU,OAAd,SAAsBzB,EAAK,GAAGA,KAAKiE,QAE3CjE,GACA,qBAAKyB,UAAU,aAAf,UAjBkB+J,EAkBHxL,EAAK,GAAGA,KAAK2L,SAjB3BH,GAAS,IACN,gBAAN,OAAaxD,KAAKC,MAAMuD,EAAQ,KAAhC,gBACM,uBAAaA,EAAb,gBAmBN,sBAAK/J,UAAU,QAAf,UACC,qBAAKA,UAAU,QAAf,sCACCzB,IAAI,UACJA,EAAK,UADD,aACJ,EAASA,KAAKE,KAAI,SAACF,GAClB,IAAQ+K,EAAyB/K,EAAzB+K,SAAU9G,EAAejE,EAAfiE,MAAO+G,EAAQhL,EAARgL,IACzB,OACC,sBAAKvJ,UAAU,YAAf,UACC,cAACC,GAAD,CACCE,OAAQ,EACRD,MAAO,EACPE,IAAK,GACLC,IAAKiJ,IAEN,cAAC,IAAD,CAAMtJ,UAAU,OAAOnC,GAAE,kBAAa0L,GAAtC,SACE/G,MAR6BA,cCjG1B2H,GAAS,SAAC3I,GACtB,IAAM8E,EAAUC,KAAKC,MAAMhF,EAAW,KAChCiF,EAAUF,KAAKC,MAAMhF,EAAW,KAAkB,GAAV8E,EAI3C,MAHM,UAAMA,EAAU,GAAV,WAAmBA,GAAnB,UAAkCA,GAAxC,YACRG,EAAU,GAAV,WAAmBA,GAAYA,I,kDCW3BvL,GAAYF,IAAOC,IAAV,oXAoBTmP,GAAcpP,YAAOqP,KAAPrP,CAAH,kzBAsDXsP,GAAa,SAAC/L,GAAD,oBAClBA,QADkB,IAClBA,GADkB,UAClBA,EAAMI,gBADY,aAClB,EAAgB4L,SAAS9L,KAAI,qBAAGI,MAAkB0E,MAAM,EAAG,MAC/CiH,GAAY,WACxB,IAAQ3L,EAAOmL,cAAPnL,GACMP,EAAaD,YAAO,uBAAD,OAAwBQ,GAAM3C,GAAvDqC,KACFkM,EAAcvE,mBAAQ,kBAbN,SAAC3H,GAAD,oBACtBA,QADsB,IACtBA,GADsB,UACtBA,EAAMI,gBADgB,aACtB,EAAgB4L,SACd9L,KAAI,qBAAGI,MACP0E,MAAM,EAAG,KACTmH,QAAO,SAACC,EAAqBC,GAC7B,OAAOD,EAAcC,EAAe,MAClC,qBACFrH,MAAM,GAAI,GAMsBsH,CAAevM,KAAW,CAACA,IAC/CwM,EAAWzM,YAAOoM,EAAavO,GAArCqC,KACR,EAQIH,qBAAW6C,IAPdC,EADD,EACCA,WACAE,EAFD,EAECA,YACAD,EAHD,EAGCA,QACAE,EAJD,EAICA,OACAK,EALD,EAKCA,WACAE,EAND,EAMCA,SACAD,EAPD,EAOCA,MAGKb,EAAQE,KAiBd,OAfAe,qBAAU,WACT,GAAI+I,EAAQ,CACX,IAAM7I,EAAO6I,EAAOC,MAAMpJ,GAClB7C,EAA+CmD,EAA/CnD,KAAUqH,EAAqClE,EAAzC+I,GAAezJ,EAA0BU,EAA9BgJ,GAAiBzJ,EAAaS,EAAjBiJ,GAChCC,EAAchF,EAAMxF,OACpByK,EAAa7J,EAAQ,GAAGzC,KACxB+H,EAAMsD,GAAO3I,GACnBH,EAAO8J,GACPhK,EAAQrC,GACRoC,EAAWkK,GACXhK,EAAYyF,GACHnF,EAAW4I,GAAWhM,OAE9B,CAACqD,IAGH,eAAC,GAAD,YACGrD,GAAY,cAACkB,GAAA,EAAD,IACblB,GACA,sBAAK0B,UAAU,SAAf,UACC,cAACC,GAAD,CACCC,MAAO,GACPC,OAAQ,GACRC,IAAK,GACLC,IAAK/B,EAASK,SAASyG,cAExB,sBAAKpF,UAAU,OAAf,UACC,6BAAK1B,EAASK,SAASG,OACvB,sBAAKkB,UAAU,UAAf,UACC,cAACqL,GAAA,EAAD,CAAQhL,IAAK/B,EAASK,SAAS2M,QAAQC,YACtCjN,EAASK,SAAS2M,QAAQE,kBAK/B,eAACpB,GAAD,aACI9L,IAAawM,IAAW,cAACtL,GAAA,EAAD,IAC3B,eAACiM,GAAA,EAAD,CAAWzL,UAAU,aAArB,UACC,cAAC0L,GAAA,EAAD,IACA,cAACA,GAAA,EAAD,uCACA,cAACA,GAAA,EAAD,2BACA,cAACA,GAAA,EAAD,2BACA,cAACA,GAAA,EAAD,CAAWC,MAAM,QAAQC,GAAI,CAAEC,aAAc,QAA7C,6BAID,cAACC,GAAA,EAAD,CAAW9L,UAAU,aAArB,SACE1B,GACAwM,GACAA,EAAOC,MAAMtM,KAAI,SAACwD,EAAWD,GAC5B,IACClD,EAIGmD,EAJHnD,KACIqH,EAGDlE,EAHH+I,GACIzJ,EAEDU,EAFHgJ,GACIzJ,EACDS,EADHiJ,GAEKC,EAAchF,EAAMxF,OACpBiG,EAAYT,EAAMrH,KAClBsM,EAAa7J,EAAQ,GAAGzC,KACxB+H,EAAMsD,GAAO3I,GAUnB,OACC,eAACuK,GAAA,EAAD,CACC/L,UAAU,YAEVvC,QAbkB,WACnByD,EAAWkK,GACXhK,EAAYyF,GACZxF,EAAO8J,GACPhK,EAAQrC,GACR4C,EAAW4I,GAAWhM,IACtBsD,EAASI,GACTlB,EAAMoB,SAGN,UAKC,cAACwJ,GAAA,EAAD,CAAW1L,UAAU,IAArB,SACEgC,EAAQ,IAEV,cAAC0J,GAAA,EAAD,CACC1L,UACC2B,IAAUK,EAAQ,SAAW,OAF/B,SAKElD,IAEF,cAAC4M,GAAA,EAAD,CAAW1L,UAAU,SAArB,SACEoL,IAEF,cAACM,GAAA,EAAD,CAAW1L,UAAU,QAArB,SACC,8BAAM4G,MAEP,cAAC8E,GAAA,EAAD,CAAW1L,UAAU,MAArB,SAA4B6G,MAnBvB/H,eCzHRkN,GAAehR,YAAOqQ,KAAPrQ,CAAH,oDAIZiR,GAAiBjR,YAAOkR,KAAPlR,CAAH,wIAQdyK,GAAezK,YAAO0K,KAAP1K,CAAH,+CAGZmR,GAAQC,aAAY,CACzBC,QAAS,CACRC,QAASC,OAuSIC,OAnSf,WACC,IC/EwBC,ED+ElB/P,EAAQ2H,iBAAO,IACfqI,EAAMrI,iBAAO,IACnB,EAAwBnG,oBAAS,GAAjC,mBAAOyO,EAAP,KAAaC,EAAb,KACA,EAAwC1O,oBAAS,GAAjD,mBAAO2O,EAAP,KAAqBC,EAArB,KACA,EAAsC5O,oB1BtES,IAAvC6O,SAASC,OAAO/Q,QAAQ,a0BsEhC,mBAAOa,EAAP,KAAoBmQ,EAApB,KACA,EAAsB/O,mBAAwB,MAA9C,mBAAOnB,EAAP,KAAYmQ,EAAZ,KACcC,EAAS9O,aACtB,4CAA0BtB,KAC1Bb,GAFOqC,KAIR,EAA8BL,mBAAmB,IAAjD,mBAAOuD,EAAP,KAAgBC,EAAhB,KACA,EAA8BxD,mBAAiB,IAA/C,mBAAOqD,EAAP,KAAgBL,EAAhB,KACA,EAAgChD,mBAAiB,IAAjD,mBAAOsD,EAAP,KAAiBJ,EAAjB,KACA,EAAwBlD,mBAAiB,IAAzC,mBAAOY,EAAP,KAAaqC,EAAb,KACA,EAAsBjD,mBAAiB,IAAvC,oBAAOoD,GAAP,MAAYD,GAAZ,MACA,GAA0BnD,oBAAU,GAApC,qBAAOyD,GAAP,MAAcC,GAAd,MC9FwB6K,EDgGf,WACR,IAAMW,EAAUC,OAAOC,aAAaC,QAAQ,UACtCC,EAAOH,OAAOC,aAAaC,QAAQ,OACrCH,GAAWI,GACdT,SAASC,OAASI,EAClBH,GAAe,GACfL,GAAQ,GACRM,EAAOO,SAASD,MAEhBP,GAAe,GACfL,GAAQ,KCzGP7K,qBAAU,WACN0K,MACD,ID2GN,IAAMiB,GAAkB,WACvBd,GAAQ,IAsBHe,GAAe,WACpBnR,IAASH,MAAK,SAACC,GACdsI,QAAQC,IAAIvI,GACK,MAAbA,EAAIsR,OACPX,GAAe,GACfC,EAAO,MACPG,OAAOC,aAAaO,WAAW,OAC/BR,OAAOC,aAAaO,WAAW,eA0DlC,OACC,cAACjR,EAAmBkR,SAApB,CAA6BhF,MAAO,CAAEhM,cAAaC,OAAnD,SACC,cAACgR,GAAA,EAAD,CAAe5B,MAAOA,GAAtB,SACC,cAAC,IAAD,UACC,sBAAKnM,UAAU,MAAf,UAxCiB,WAAO,IAAD,IAC1B,OACC,cAAC1E,EAAD,UACC,eAACE,EAAD,WACC,qBAAKwE,UAAW,OAAhB,SACC,qBAAKK,IAAI,oBAAoB2N,IAAK,GAAI7N,OAAQ,OAE7CrD,EAQD,qCACC,cAACkP,GAAD,CACCgC,IAAI,GACJ3N,IAAG,OAAE8M,QAAF,IAAEA,GAAF,UAAEA,EAAMc,eAAR,aAAE,EAAe1C,YAErB,cAACU,GAAD,CAAgBiC,QAAQ,QAAxB,gBACEf,QADF,IACEA,GADF,UACEA,EAAMc,eADR,aACE,EAAezC,WAEjB,cAAC,GAAD,CACC/N,QAASkQ,GACT/H,UAAW,cAACuI,GAAA,EAAD,IAFZ,6BAfD,cAAC,GAAD,CACC1Q,QAASiQ,GACT9H,UAAW,cAACwI,GAAA,EAAD,IAFZ,+BAiCCC,GACD,eAAC5S,EAAD,WACC,cAAC,EAAD,IACA,cAAC6S,GAAA,EAAD,CAAK1C,GAAI,CAAE2C,UAAW,QAAQ,sCAAsC,CAC3CC,QAAQ,WAEjC,eAACzT,EAAD,WACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOyC,KAAK,aAAZ,SACC,cAAC,GAAD,MAED,cAAC,IAAD,CAAOA,KAAK,IAAZ,SAAiB,UAElB,cAAC,EAAD,UACC,cAACyD,GAAa6M,SAAd,CACChF,MAAO,CACNhK,OACAwC,OACAC,UACAC,WACAE,aACAD,UACAE,SACAT,aACAE,cACAC,UACAF,UACAS,aAbF,SAgBC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOpE,KAAK,aAAZ,SACC,eAAC,IAAD,WACC,eAAC,IAAD,CAAOA,KAAK,+BAAZ,UACC,cAAC,GAAD,CAEEiR,MAAM,EACNC,UAAU,EACVC,aAAc,EACdC,eAAgB,EAChBC,UAAU,EACVC,cAAe,IACfC,UACC,cAACpP,GAAD,IAEDqP,UACC,cAACvP,GAAD,MAIH,cAAC,GAAD,uCACA,cAAC,GAAD,IACA,cAAC,GAAD,uCACA,cAAC,GAAD,IACA,cAAC,GAAD,uCACA,cAAC,GAAD,IACA,cAAC,GAAD,6BACA,cAAC,GAAD,OAED,cAAC,IAAD,CAAOjC,KAAK,mBAAZ,SACC,cAAC,GAAD,MAED,cAAC,IAAD,CAAOA,KAAK,sBAAZ,SACC,cAAC,GAAD,MAED,cAAC,IAAD,CACCK,GAAI,CACH7B,SACC,uCAKL,cAAC,IAAD,CAAOwB,KAAK,UAAZ,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CACCA,KAAK,eACLnC,SACC,cAAC,GAAD,MAGF,cAAC,IAAD,CAAOmC,KAAK,UAAZ,SACC,cAAC,GAAD,WAIH,cAAC,IAAD,CACCA,KAAK,YACLnC,SACC,cAAC,GAAD,MAGF,cAAC,IAAD,CACCwC,GAAI,CACH7B,SACC,+BACDiT,MAAO,CAAEC,KAAM,qBAStB,cAAC,EAAD,UACC,cAACjO,GAAa6M,SAAd,CACChF,MAAO,CACNhK,OACAwC,OACAC,UACAC,WACAE,aACAD,UACAP,aACAE,cACAC,UACAF,UACAQ,SACAC,aAbF,SAgBC,cAAC,GAAD,QAGF,eAACuN,GAAA,EAAD,CAAQxC,KAAMA,EAAd,UACC,cAACyC,GAAA,EAAD,2BACA,eAACC,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,yGAGA,cAACC,GAAA,EAAD,CACCC,WAAS,EACTC,OAAO,QACP5Q,GAAG,OACH6Q,MAAM,qBACNlK,KAAK,QACLmK,WAAS,EACTzB,QAAQ,WACRtF,SA9LJ,SAACzD,GACJzI,EAAM+H,QAAUU,EAAEyK,OAAO9G,SA+LnB,cAACyG,GAAA,EAAD,CACC/Q,MAAOqO,EACP2C,WAAS,EACTC,OAAO,QACP5Q,GAAG,OACH6Q,MAAM,eACNlK,KAAK,WACLmK,WAAS,EACTzB,QAAQ,WACRtF,SAnMJ,SAACzD,GACJuH,EAAIjI,QAAUU,EAAEyK,OAAO9G,OAmMhB+G,WAAYhD,EAAe,2BAAS,QAGtC,eAACiD,GAAA,EAAD,WACC,cAACpK,GAAA,EAAD,CAAQjI,QApPK,WACnBhB,EAAMC,EAAM+H,QAASiI,EAAIjI,SAASpI,MAAK,SAACC,GAChB,IAAD,IAAL,MAAbA,EAAIsR,MACPhB,GAAQ,GACRK,GAAe,GACfH,GAAgB,GAChBI,EAAM,OAAC5Q,QAAD,IAACA,GAAD,UAACA,EAAKyT,eAAN,aAAC,EAAclR,IACrBwO,OAAOC,aAAa0C,QACnB,MACAjH,KAAKC,UAAL,OAAe1M,QAAf,IAAeA,GAAf,UAAeA,EAAKyT,eAApB,aAAe,EAAclR,KAE9BwO,OAAOC,aAAa0C,QAAQ,SAAUjD,SAASC,SAG/CF,GAAgB,OAsOZ,0BACA,cAACpH,GAAA,EAAD,CAAQjI,QArNK,WACnBmP,GAAQ,IAoNF,0CEnWRqD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFpD,SAASqD,eAAe,W","file":"static/js/main.65938ad8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nconst StyledDiv = styled.div`\r\n\tflex: 1 0 auto;\r\n\theight: 100vh;\r\n\toverflow-y: hidden;\r\n\r\n`;\r\n\r\nexport const ContentWrapper = StyledDiv;\r\n","import React from \"react\";\r\nimport styled from '@emotion/styled';\r\n\r\nconst StyledDiv = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 6rem;\r\n  width: 100vw;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: rgba(237, 242, 247, 1);\r\n  z-index: 1200;\r\n  background-color: white;\r\n`;\r\n\r\ninterface Props {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Footer = (props: Props) => {\r\n  return <StyledDiv>{props.children}</StyledDiv>;\r\n};\r\n","import React from \"react\";\r\nimport styled from '@emotion/styled';\r\n\r\nconst StyledHead = styled.header`\r\n  display: flex;\r\n  position: fixed;\r\n  top: 0px;\r\n  right: 0px;\r\n  left: 0px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);\r\n  height: 4rem;\r\n  border-style: solid;\r\n  border-width: 0px;\r\n  border-bottom-width: 1px;\r\n  border-color: rgba(237, 242, 247, 1);\r\n  background-color: rgb(236, 65, 65);\r\n  .logo {\r\n    width: 256px;\r\n  }\r\n`;\r\n\r\nexport const Header = StyledHead;\r\nexport const HeaderContent = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n","import React from \"react\";\r\nimport styled from '@emotion/styled';\r\n\r\nexport const Layout = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\ninterface MainProps {\r\n\thasTitle: boolean;\r\n}\r\nconst StyledMain = styled.main<MainProps>`\r\n\twidth: 100%;\r\n\theight: ${(props) =>\r\n\t\tprops.hasTitle ? `calc(100vh - 6rem)` : `calc(100vh - 4rem)`};\r\n\tpadding-top: ${(props) => (props.hasTitle ? `8rem` : `6rem`)};\r\n`;\r\nconst StyledDiv = styled.div`\r\n\tmax-width: calc(100vw - 256px);\r\n\twidth: 100%;\r\n\theight: calc(100vh - 14rem);\r\n\toverflow-x: hidden;\r\n\toverflow-y: scroll;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\t@media screen and (min-width: 600px) {\r\n\t\t&::-webkit-scrollbar {\r\n\t\t\twidth: 10px;\r\n\t\t\tbackground-color: transparent;\r\n\t\t}\r\n\t\t&::-webkit-scrollbar-thumb {\r\n\t\t\twidth: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tbackground-color: #6b6b6b2f;\r\n\t\t}\r\n\t}\r\n`;\r\ninterface Props {\r\n\tchildren: React.ReactNode;\r\n}\r\nexport const ScrollContent = ({ children }: Props) => {\r\n\tconst location = useLocation();\r\n\treturn (\r\n\t\t<StyledMain hasTitle={location.pathname.indexOf(\"findmusic\") !== -1}>\r\n\t\t\t<StyledDiv>{children}</StyledDiv>\r\n\t\t</StyledMain>\r\n\t);\r\n};\r\n","export const fetcher = async (...args: Parameters<typeof window.fetch>) => {\r\n    return fetch(...args).then((res) => res.json());\r\n};\r\nexport const fetcherAll=(token:string,...urls:string[])=>{\r\n    console.log(\"token\"+token);\r\n    return Promise.all(urls.map(url=>fetcher(url)));\r\n}\r\n// fn1(\"token\",...[\"/a\",\"/b\",\"/c\"]);\r\n\r\n// export const fetcherAll = async ()","import { createContext, useContext } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\n\r\n\r\nexport const logout = async () => {\r\n  return await fetcher(`/logout`) as any;\r\n};\r\nexport const login = async (phone: string, password: string) => {\r\n  const res = await fetch(\r\n    `/login/cellphone?phone=${phone}&password=${password}`\r\n  ).then((res) => res.json());\r\n  return res as any;\r\n};\r\nexport const checkCookie=()=>{\r\n  return document.cookie.indexOf(\"MUSIC_U=\")!==-1;\r\n}\r\n\r\ninterface LoginStatusContextInterface{\r\n  loginStatus:boolean;\r\n  uid:number|null;\r\n}\r\n\r\nexport const LoginStatusContext = createContext<LoginStatusContextInterface>({loginStatus:false,uid:null});\r\n\r\n\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nconst StyledAside = styled.aside`\r\n\r\n\ttop: 4rem;\r\n\theight: calc(100vh - 4rem - 6rem);\r\n\tposition: fixed;\r\n\twidth: 256px;\r\n\tz-index: 1000;\r\n`;\r\nconst StyledDiv = styled.div`\r\n\r\n\tborder-color: rgba(237, 242, 247, 1);\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbox-sizing: border-box;\r\n\tpadding: 1rem;\r\n\tpadding-right: 2px;\r\n\tborder-right-width: 1px;\r\n\tborder-right-style: solid;\r\n\toverflow-y: scroll;\r\n\t&::-webkit-scrollbar {\r\n\t\twidth: 10px;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\t&::-webkit-scrollbar-thumb {\r\n\t\twidth: 10px;\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: #80808022;\r\n\t}\r\n`;\r\n\r\ninterface Props {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nexport const SiderBar = (props: Props) => {\r\n\treturn (\r\n\t\t<StyledAside>\r\n\t\t\t<StyledDiv>{props.children}</StyledDiv>\r\n\t\t</StyledAside>\r\n\t);\r\n};\r\n","import React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport styled from \"@emotion/styled\";\r\nconst StyledDiv = styled.div<Props>`\r\n\tbackground-color: ${(props) =>\r\n\t\tprops.activated ? \"rgb(246,246,247)\" : \"white\"};\r\n\t&:hover {\r\n\t\tbackground-color: rgb(246, 246, 247);\r\n\t\tcursor: pointer;\r\n\t}\r\n\tfont-weight: ${(props) => (props.activated ? \"1000\" : \"500\")};\r\n\tborder-radius: 8px;\r\n\theight: 2rem;\r\n\tborder-bottom: 4px solid white;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding-left: 8px;\r\n\tpadding-right: 8px;\r\n`;\r\nconst StyledLink = styled(Link)`\r\n\tcolor: #000000df;\r\n\ttext-decoration: none;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n`;\r\ninterface Props {\r\n\tactivated?: boolean;\r\n\tpath: string;\r\n\ttext: string;\r\n\tonClick?: () => void;\r\n}\r\n\r\nexport const SiderLink = ({ text, path, activated, onClick }: Props) => {\r\n\tlet history = useHistory();\r\n\tconst handleClick = () => {\r\n\t\thistory.push(path);\r\n\t\tonClick && onClick();\r\n\t};\r\n\treturn (\r\n\t\t<StyledDiv {...{ text, path, activated }} onClick={handleClick}>\r\n\t\t\t<StyledLink to={path}>{text}</StyledLink>\r\n\t\t</StyledDiv>\r\n\t);\r\n};\r\n","import  styled  from '@emotion/styled';\r\nexport const SiderTitle = styled.div`\r\n\tcolor: #808080;\r\n\tfont-size:small;\r\n\theight: 3rem;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding-left: 8px;\r\n`;\r\n","import { useContext, useState } from \"react\";\r\nimport { useLocation, useRouteMatch } from \"react-router\";\r\nimport useSWR from \"swr\";\r\nimport { LoginStatusContext } from \"../hooks/useAuth\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { SiderBar } from \"./SiderBar\";\r\nimport { SiderLink } from \"./SiderLink\";\r\nimport { SiderTitle } from \"./SiderTitle\";\r\nconst linkData = [\r\n\t{ path: \"/findmusic\", text: \"发现音乐\" },\r\n\t{ path: \"/videos\", text: \"视频\" },\r\n];\r\nconst linkDataLogin = [\r\n\t{ path: \"/findmusic\", text: \"发现音乐\" },\r\n\t{ path: \"/videos\", text: \"视频\" },\r\n\t{ path: null, text: \"我的音乐\" },\r\n];\r\nexport const Sider = () => {\r\n\tconst [index, setIndex] = useState(0);\r\n\tconst loginData = useContext(LoginStatusContext);\r\n\tconst { data: listData, error } = useSWR(\r\n\t\t() => `/user/playlist?uid=${loginData.uid}`,\r\n\t\tfetcher\r\n\t);\r\n\tconst location = useLocation();\r\n\r\n\treturn (\r\n\t\t<SiderBar>\r\n\t\t\t{!loginData.loginStatus &&\r\n\t\t\t\tlinkData.map(({ path, text }, i) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<SiderLink\r\n\t\t\t\t\t\t\tkey={text}\r\n\t\t\t\t\t\t\tpath={path}\r\n\t\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\t\tactivated={location.pathname.indexOf(path) !== -1}\r\n\t\t\t\t\t\t></SiderLink>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t{loginData.loginStatus &&\r\n\t\t\t\tlinkDataLogin.map(({ path, text }, i) => {\r\n\t\t\t\t\tif (path)\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<SiderLink\r\n\t\t\t\t\t\t\t\tkey={text}\r\n\t\t\t\t\t\t\t\tpath={path}\r\n\t\t\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\t\t\tactivated={\r\n\t\t\t\t\t\t\t\t\tlocation.pathname.indexOf(path) !== -1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t></SiderLink>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\telse return <SiderTitle key={text}>{text}</SiderTitle>;\r\n\t\t\t\t})}\r\n\t\t\t{/* {loginData.loginStatus && listData && (\r\n\t\t\t\t<p>{listData?.playlist?.length}</p>\r\n\t\t\t)} */}\r\n\t\t\t{loginData.loginStatus &&\r\n\t\t\t\tlistData &&\r\n\t\t\t\tlistData?.playlist?.map((item: any) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<SiderLink\r\n\t\t\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\t\t\tpath={`/list/${item.id}`}\r\n\t\t\t\t\t\t\ttext={item.name}\r\n\t\t\t\t\t\t\tactivated={location.pathname.indexOf(`/list/${item.id}`) !== -1}\r\n\t\t\t\t\t\t></SiderLink>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t</SiderBar>\r\n\t);\r\n};\r\n","import Slider, { Settings } from \"react-slick\";\r\nimport React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useBanner } from \"../hooks/useBanner\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nconst StyledDiv = styled.div`\r\n\theight: 16rem;\r\n\twidth: 43rem;\r\n\tborder-radius: 1rem;\r\n\t&:hover {\r\n\t\t.slick-prev,.slick-next{\r\n            color:white;\r\n        }\r\n\t}\r\n\t@media screen and (max-width: 600px) {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\twidth: 100vw;\r\n\t}\r\n\t\r\n`;\r\nconst StyledSlider = styled(Slider)``;\r\ninterface ContainerProps {\r\n\timg: string;\r\n}\r\nconst StyledContainer = styled.div<ContainerProps>`\r\n\twidth: 43rem;\r\n\theight: 16rem;\r\n\tborder-radius: 1rem;\r\n\tbackground-size: contain;\r\n\tbackground-image: url(${(props) => props.img});\r\n`;\r\n\r\ninterface Props {\r\n\timgs?: string[];\r\n}\r\n\r\nexport const Carousel = (props: Settings & Props) => {\r\n\tconst { bannerData } = useBanner();\r\n\treturn (\r\n\t\t<StyledDiv>\r\n\t\t\t{bannerData ? (\r\n\t\t\t\t<StyledSlider {...props}>\r\n\t\t\t\t\t{bannerData.banners.map((img: any) => {\r\n\t\t\t\t\t\t// console.log(img);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<StyledContainer\r\n\t\t\t\t\t\t\t\tkey={img.imageUrl}\r\n\t\t\t\t\t\t\t\timg={img.imageUrl}\r\n\t\t\t\t\t\t\t></StyledContainer>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</StyledSlider>\r\n\t\t\t) : (\r\n\t\t\t\t<CircularProgress />\r\n\t\t\t)}\r\n\t\t</StyledDiv>\r\n\t);\r\n};\r\n","import useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\n\r\nexport function useBanner() {\r\n    const { data: bannerData, error } = useSWR(\"/banner\", fetcher);\r\n    return { bannerData, error };\r\n}\r\n","import styled from \"@emotion/styled\";\r\nimport React from \"react\";\r\nimport ArrowBackIosIcon from \"@mui/icons-material/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\ninterface Props {}\r\n\r\nexport const StyledArrowLeft = styled(ArrowBackIosIcon)`\r\n    transform: translateX(64px);\r\n    z-index:3000; \r\n`;\r\nexport const StyledArrowRight = styled(ArrowForwardIosIcon)`\r\n    transform: translateX(-64px);\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { ArrowForwardIos, ArrowRight } from \"@mui/icons-material\";\r\nimport { Typography } from \"@mui/material\";\r\nimport React, { ReactNode } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nconst StyledTypo = styled.span`\r\n\tfont-size: 24px;\r\n\twidth: 86rem;\r\n\tmargin-top: 1rem;\r\n\tmargin-bottom: 0.5rem;\r\n\tfont-weight: 600;\r\n\tvertical-align: middle;\r\n\tdisplay: inline-block;\r\n\ttext-align: left;\r\n\t.icon {\r\n\t\tvertical-align: middle;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\tuser-select: none; /* Standard */\r\n\t& span:hover {\r\n\t\tcursor: pointer;\r\n\t}\r\n`;\r\ninterface Props {\r\n\tchildren: ReactNode;\r\n\tto?: string;\r\n}\r\n\r\nexport const Title = (props: Props) => {\r\n\tconst history = useHistory();\r\n\treturn (\r\n\t\t<StyledTypo\r\n\t\t\tonClick={() => {\r\n\t\t\t\tprops.to && history.push(props.to);\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<span>{props.children}</span>\r\n\t\t\t<span className=\"icon\">\r\n\t\t\t\t<ArrowForwardIos />\r\n\t\t\t</span>\r\n\t\t</StyledTypo>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\n\r\nconst StyledContainer = styled.div`\r\n    display: flex;\r\n    width: 86rem;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    align-content: space-between;\r\n    .item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 16rem;\r\n        height: 20rem;\r\n        .link {\r\n            text-decoration: none;\r\n            text-align: left;\r\n            color: black;\r\n        }\r\n    }\r\n`;\r\ninterface ListPicProps {\r\n    src?: string;\r\n    width?: number;\r\n    height?: number;\r\n    bdr?:number;\r\n    onClick?:()=>void;\r\n}\r\nexport const StyledListPic = styled.div<ListPicProps>`\r\n    width: ${(props) => (props.width ? `${props.width}rem` : \"16rem\")};\r\n    height: ${(props) => (props.height ? `${props.height}rem` : \"16rem\")};\r\n    border-radius:${(props) => (props.bdr ? `${props.bdr}rem` : \"1rem\")};\r\n    background-image: url(${(props) => props.src?props.src:\"/default.png\"});\r\n    background-size: contain;\r\n    flex-shrink: 0;\r\n`;\r\nconst defaultData = new Array(10).fill(null);\r\nexport const RecommendList = () => {\r\n    const { data, error } = useSWR(\"/personalized?limit=10\", fetcher);\r\n    const history=useHistory();\r\n    return (\r\n        <StyledContainer>\r\n            {data?.result\r\n                ? data.result.map((item: any) => {\r\n                      return (\r\n                          <div className=\"item\">\r\n                              <StyledListPic src={item.picUrl} onClick={()=>{history&&history.push(`/list/${item.id}`)}} />\r\n                              <Link className=\"link\" to={`/list/${item.id}`}><span>{item.name}</span></Link>\r\n                          </div>\r\n                      );\r\n                  })\r\n                : defaultData.map(() => <CircularProgress />)}\r\n        </StyledContainer>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nimport { CircularProgress } from \"@mui/material\";\r\ninterface Props {}\r\nconst StyledDiv = styled.div`\r\n    display: flex;\r\n    width: 86rem;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    .item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 28rem;\r\n        height: 18rem;\r\n        span {\r\n            text-align: left;\r\n        }\r\n    }\r\n`;\r\nconst defaultData = new Array(3).fill(null);\r\nexport const PrivateContent = (props: Props) => {\r\n    const { data, error } = useSWR(\"/personalized/privatecontent\", fetcher);\r\n\r\n    return (\r\n        <StyledDiv>\r\n            {data?.result\r\n                ? data.result.map((item: any) => {\r\n                      return (\r\n                          <div className=\"item\">\r\n                              <StyledListPic src={item.sPicUrl} width={28} height={15}></StyledListPic>\r\n                              <span>{item.name}</span>\r\n                          </div>\r\n                      );\r\n                  })\r\n                : defaultData.map(() => <CircularProgress />)}\r\n        </StyledDiv>\r\n    );\r\n};\r\n","import React from 'react'\r\n \r\nlet audio=new Audio();\r\n\r\nexport const useAudio = () => {\r\n    return audio;\r\n}\r\n","import { createContext, Dispatch } from \"react\";\r\n\r\ninterface MusicContextInterface {\r\n\tname: string;\r\n\tsetName: Dispatch<string>;\r\n\turl: string;\r\n\tsetUrl: Dispatch<string>;\r\n\tartists: string;\r\n\tsetArtists: Dispatch<string>;\r\n\tduration: string;\r\n\tsetDuration: Dispatch<string>;\r\n\tsongIds: number[];\r\n\tsetSongIds: Dispatch<number[]>;\r\n\tcurrI:number;\r\n\tsetCurrI:Dispatch<number>;\r\n}\r\nexport const MusicContext = createContext<MusicContextInterface>({\r\n\tname: \"\",\r\n\tsetArtists: () => {},\r\n\tsetName: () => {},\r\n\tsetDuration: () => {},\r\n\tsetUrl: () => {},\r\n\turl: \"\",\r\n\tartists: \"\",\r\n\tduration: \"\",\r\n\tsongIds: [],\r\n\tsetSongIds: () => {},\r\n\tcurrI:-1,\r\n\tsetCurrI:()=>{}\r\n});\r\n","import styled from \"@emotion/styled\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { useAudio } from \"../hooks/useAudio\";\r\nimport { MusicContext } from \"../util/context\";\r\nimport { fetcher } from \"../util/network\";\r\nconst StyledDiv = styled.div`\r\n\twidth: 86rem;\r\n\theight: 20rem;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tflex-wrap: wrap;\r\n\talign-content: space-between;\r\n\tjustify-content: space-between;\r\n\t.item {\r\n\t\twidth: 27rem;\r\n\t\theight: 4rem;\r\n\t\tmargin-bottom: 1rem;\r\n\t\tdisplay: flex;\r\n\t\t.intro {\r\n\t\t\tmargin-left: 1rem;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\ttext-align: left;\r\n\t\t\tjustify-content: center;\r\n\t\t\t.author {\r\n\t\t\t\tcolor: #666565b9;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    .clicked{\r\n        background-color: #dfdfdf;\r\n        border-radius: 1rem;\r\n    }\r\n`;\r\ninterface ImgProps {\r\n\tsrc: string;\r\n}\r\nconst StyledImg = styled.div<ImgProps>`\r\n\tborder-radius: 1rem;\r\n\twidth: 4rem;\r\n\theight: 4rem;\r\n\tbackground-image: url(${(props) => props.src});\r\n`;\r\n\r\nexport const NewSongsList = () => {\r\n\tconst { data, error } = useSWR(\"/personalized/newsong?limit=12\", fetcher);\r\n\tconst { setDuration, setArtists, setName, setUrl, setCurrI, currI,setSongIds } =\r\n\t\tuseContext(MusicContext);\r\n    useEffect(() => {\r\n       if(data){\r\n           setSongIds(data.result.map((item: any) =>item.id));\r\n       }\r\n    }, [data])\r\n    const audio = useAudio();\r\n\treturn (\r\n\t\t<StyledDiv>\r\n\t\t\t{data\r\n\t\t\t\t? data.result.map((item: any,index:number) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={index===currI?\"clicked item\":\" item\"}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUrl(item.picUrl);\r\n\t\t\t\t\t\t\t\t\tsetName(item.name);\r\n\t\t\t\t\t\t\t\t\tsetArtists(item.song.artists[0].name);\r\n\t\t\t\t\t\t\t\t\tsetCurrI(index);\r\n                                    audio.pause()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<StyledImg src={item.picUrl}></StyledImg>\r\n\t\t\t\t\t\t\t\t<div className=\"intro\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"name\">{item.name}</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"author\">\r\n\t\t\t\t\t\t\t\t\t\t{item.song.artists\r\n\t\t\t\t\t\t\t\t\t\t\t.map((artist: any) => artist.name)\r\n\t\t\t\t\t\t\t\t\t\t\t.join(\"/\")}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t  })\r\n\t\t\t\t: new Array(12).fill(null).map(() => <CircularProgress />)}\r\n\t\t</StyledDiv>\r\n\t);\r\n};\r\n","import React from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\nimport styled from \"@emotion/styled\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nimport { CircularProgress } from \"@mui/material\";\r\n\r\nconst StyeldDiv = styled.div`\r\n    display: flex;\r\n    width: 86rem;\r\n    height: 17rem;\r\n    justify-content: space-between;\r\n    .mv {\r\n        display: flex;\r\n        flex-direction: column;\r\n        text-align: left;\r\n        width: 20rem;\r\n        span {\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n        .artists {\r\n            color: #666565b9;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const RecommendMv = () => {\r\n    const { data } = useSWR(\"/personalized/mv\", fetcher);\r\n    return (\r\n        <StyeldDiv>\r\n            {data\r\n                ? data.result.map((item: any) => {\r\n                      return (\r\n                          <div className=\"mv\">\r\n                              <StyledListPic\r\n                                  src={item.picUrl}\r\n                                  width={20}\r\n                                  height={11}\r\n                              />\r\n                              <span className=\"name\">{item.name}</span>\r\n                              <span className=\"artists\">\r\n                                  {item.artists\r\n                                      .map((artist: any) => artist.name)\r\n                                      .join(\"/\")}\r\n                              </span>\r\n                          </div>\r\n                      );\r\n                  })\r\n                : new Array(4).fill(null).map(() => (\r\n                      <div className=\"mv\">\r\n                          <CircularProgress />\r\n                      </div>\r\n                  ))}\r\n        </StyeldDiv>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nconst StyledDiv = styled.div<Partial<Props>>`\r\n\tfont-size: ${(props) => (props.activated ? \"22px\" : \"18px\")};\r\n\tfont-weight: ${(props) => (props.activated ? \"600\" : \"\")};\r\n\tmargin-left: 2rem;\r\n\tborder-bottom: ${(props) =>\r\n\t\tprops.activated ? \"solid 2px rgb(236, 65, 65) \" : \"\"};\r\n\t&:hover {\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.tab-link {\r\n    color:black;\r\n    text-decoration: none;\r\n  }\r\n`;\r\ninterface Props {\r\n\ttitle: string;\r\n\tactivated?: boolean;\r\n\tonClick?: () => void;\r\n\tpath: string;\r\n}\r\n\r\nexport const Tab = ({ title, activated = false, onClick, path }: Props) => {\r\n\treturn (\r\n\t\t<StyledDiv activated={activated} onClick={onClick}>\r\n\t\t\t<Link className=\"tab-link\" to={path}>\r\n\t\t\t\t{title}\r\n\t\t\t</Link>\r\n\t\t</StyledDiv>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nconst StyledHead = styled.header`\r\n\r\n\tdisplay: flex;\r\n\tposition: fixed;\r\n\ttop: 4rem;\r\n\twidth: 100%;\r\n\tleft: 256px;\r\n\theight: 4rem;\r\n\tbackground-color: rgb(255, 255, 255);\r\n\talign-items: center;\r\n`;\r\n\r\nexport const TabBar = StyledHead;\r\n","import React, { useEffect, useLayoutEffect, useState } from 'react'\r\nimport { useLocation, useRouteMatch } from 'react-router';\r\nimport { Tab } from './Tab';\r\nimport { TabBar } from './TabBar';\r\n\r\ninterface Props {\r\n    \r\n}\r\nconst tabMap=[\r\n    {\r\n        title: \"个性推荐\",\r\n        path: \"personalrecommend\",\r\n    },\r\n    {\r\n        title: \"歌单\",\r\n        path: \"lists\",\r\n    },\r\n    {\r\n        title: \"最新音乐\",\r\n        path: \"newsongs\",\r\n    },\r\n]\r\nexport const RecommendTabs = (props: Props) => {\r\n    const [tab, setTab] = useState<number>(0);\r\n    const match=useRouteMatch(tabMap.map(({path})=>`/findmusic/${path}`));\r\n    useLayoutEffect(() => {\r\n       for (let index = 0; index < tabMap.length; index++) {\r\n           const {path} = tabMap[index];\r\n           if(match?.path.indexOf(path)!==-1){\r\n               setTab(index);\r\n               break;\r\n           }\r\n       }\r\n    }, [match])\r\n    return (\r\n        <TabBar>\r\n        {tabMap.map(\r\n            (\r\n                { title, path },\r\n                index,\r\n                arr\r\n            ) => (\r\n                <Tab\r\n                    key={title}\r\n                    title={title}\r\n                    activated={\r\n                        title ===\r\n                        arr[tab].title\r\n                    }\r\n                    path={path}\r\n                    onClick={() => {\r\n                        setTab(index);\r\n                    }}\r\n                />\r\n            )\r\n        )}\r\n    </TabBar>\r\n    )\r\n}\r\n","import React, { Dispatch } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\n\r\ninterface Props {\r\n\tcurrCat: string;\r\n\tsetCurrCat: Dispatch<string>;\r\n}\r\nexport const vidCats = [\r\n\t{\r\n\t\tid: 58100,\r\n\t\tname: \"现场\",\r\n\t},\r\n\t{\r\n\t\tid: 60100,\r\n\t\tname: \"翻唱\",\r\n\t},\r\n\t{\r\n\t\tid: 1101,\r\n\t\tname: \"舞蹈\",\r\n\t},\r\n\t{\r\n\t\tid: 58101,\r\n\t\tname: \"听BGM\",\r\n\t},\r\n\t{\r\n\t\tid: 2100,\r\n\t\tname: \"生活\",\r\n\t},\r\n\t{\r\n\t\tid: 2103,\r\n\t\tname: \"游戏\",\r\n\t},\r\n\t{\r\n\t\tid: 57104,\r\n\t\tname: \"ACG音乐\",\r\n\t},\r\n\t{\r\n\t\tid: 1105,\r\n\t\tname: \"最佳饭制\",\r\n\t},\r\n];\r\nexport const VidCategories = ({currCat, setCurrCat}: Props) => {\r\n    return (\r\n\t\t<div className=\"status\">\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"curr-cat\">\r\n\t\t\t\t\t<span>{currCat}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{vidCats.slice(0, 10).map((item) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={item.name}\r\n\t\t\t\t\tclassName={`cat-name ${\r\n\t\t\t\t\t\titem.name === currCat ? \"selected\" : \"\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetCurrCat(item.name);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.name}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport const Categories = ({ currCat, setCurrCat }: Props) => {\r\n\tconst { data: cats } = useSWR(\"/playlist/catlist\", fetcher);\r\n\treturn (\r\n\t\t<div className=\"status\">\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"curr-cat\">\r\n\t\t\t\t\t<span>{currCat}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{cats?.sub.slice(0, 10).map((item: any) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={item.name}\r\n\t\t\t\t\tclassName={`cat-name ${\r\n\t\t\t\t\t\titem.name === currCat ? \"selected\" : \"\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetCurrCat(item.name);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.name}\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useSWR, { Middleware } from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { Categories } from \"./Categories\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\n\r\nexport const StyledContainer = styled.div`\r\n\tmargin-top: 1rem;\r\n\r\n\t.status {\r\n\t\tmargin-bottom: 1rem;\r\n\t\tfont-size: 16px;\r\n\t\theight: 32px;\r\n\t\twidth: 86rem;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.wrapper {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t\t.curr-cat {\r\n\t\t\twidth: 104px;\r\n\t\t\theight: 32px;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-size: 16px;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-radius: 16px;\r\n\t\t\tborder-width: 1px;\r\n\t\t\tborder-color: gray;\r\n\t\t}\r\n\t\t.cat-name {\r\n\t\t\tfont-size: small;\r\n\t\t\theight: 16px;\r\n\t\t\tflex-basis: 4rem;\r\n\t\t\tuser-select: none;\r\n\t\t}\r\n\t\t.selected {\r\n\t\t\tbackground-color: rgb(253, 245, 245);\r\n\t\t\tborder-radius: 12px;\r\n\t\t\tcolor: rgb(236, 65, 65);\r\n\t\t}\r\n\t}\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t\twidth: 86rem;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: space-between;\r\n\t\talign-content: space-between;\r\n\t\t.item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: 16rem;\r\n\t\t\theight: 20rem;\r\n\t\t\tspan {\r\n\t\t\t\ttext-align: left;\r\n\t\t\t}\r\n\t\t\t.name {\r\n\t\t\t\ttext-decoration: none;\r\n\t\t\t\tcolor: black;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const MusicLists = () => {\r\n\tconst [currCat, setCurrCat] = useState(\"全部歌单\");\r\n\tconst setCurrCatMemo = useCallback(setCurrCat, [currCat]);\r\n\tconst [offset, setOffset] = useState(0);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [playlists, setPlaylists] = useState<any[]>([]);\r\n\tconst divRef = useRef<HTMLDivElement>(null);\r\n\tconst intersectionObserverRef = useRef<IntersectionObserver | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst res: any = await fetch(\r\n\t\t\t\t`/top/playlist?limit=20&cat=${currCat}&offset=${offset}`\r\n\t\t\t).then((res) => res.json());\r\n\r\n\t\t\tconst { playlists: newPlaylists } = res;\r\n\t\t\tsetPlaylists(newPlaylists);\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [currCat]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (offset <= 100)\r\n\t\t\t(async () => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tconst res: any = await fetch(\r\n\t\t\t\t\t`/top/playlist?limit=20&cat=${currCat}&offset=${\r\n\t\t\t\t\t\toffset * 20\r\n\t\t\t\t\t}`\r\n\t\t\t\t).then((res) => res.json());\r\n\r\n\t\t\t\tconst { playlists: newPlaylists } = res;\r\n\t\t\t\tsetPlaylists([...playlists, ...newPlaylists]);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t})();\r\n\t}, [offset]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst $node = divRef.current as HTMLDivElement;\r\n\t\tintersectionObserverRef.current = new IntersectionObserver(\r\n\t\t\t(entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0] && entries[0].isIntersecting) {\r\n\t\t\t\t\tsetOffset((val) => (val >= 100 ? 100 : val + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t\tintersectionObserverRef.current.observe($node);\r\n\t\treturn () => {\r\n\t\t\ttry {\r\n\t\t\t\tintersectionObserverRef.current?.unobserve($node);\r\n\t\t\t\tintersectionObserverRef.current?.disconnect();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e); // nothing to do\r\n\t\t\t}\r\n\t\t};\r\n\t}, [divRef.current]);\r\n\r\n\treturn (\r\n\t\t<StyledContainer>\r\n\t\t\t<Categories setCurrCat={setCurrCatMemo} currCat={currCat} />\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{playlists.map(\r\n\t\t\t\t\t({ coverImgUrl, name ,id}: any, index, playlists) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"item\" key={name}>\r\n\t\t\t\t\t\t\t\t<StyledListPic\r\n\t\t\t\t\t\t\t\t\tsrc={coverImgUrl}\r\n\t\t\t\t\t\t\t\t></StyledListPic>\r\n\t\t\t\t\t\t\t\t<Link className=\"name\" to={`/list/${id}`}>{name}</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div ref={divRef} style={{ width: \"100%\", height: \"2rem\" }}>\r\n\t\t\t\t{loading && <CircularProgress></CircularProgress>}\r\n\t\t\t</div>\r\n\t\t</StyledContainer>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { ArrowForwardIos } from \"@mui/icons-material\";\r\nimport { Button, CircularProgress } from \"@mui/material\";\r\nimport {\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nimport EqualizerIcon from \"@mui/icons-material/Equalizer\";\r\nimport { MusicContext } from \"../util/context\";\r\nimport { useAudio } from \"../hooks/useAudio\";\r\nexport const StyledContainer = styled.div`\r\n\tmargin-top: 2rem;\r\n\twidth: 73rem;\r\n\t.header {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\t.btn {\r\n\t\twidth: calc(73rem - 270px);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\t.list-item {\r\n\t\t&:hover {\r\n\t\t\tbackground-color: rgb(239, 239, 239);\r\n\t\t}\r\n\t\tpadding-left: 2rem;\r\n\t\tpadding-right: 2rem;\r\n\t\twidth: 100%;\r\n\t\theight: 5rem;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.i {\r\n\t\t\ttext-align: left;\r\n\t\t\tjustify-self: flex-start;\r\n\t\t\twidth: 2rem;\r\n\t\t\tcolor: #b9b9b9;\r\n\t\t}\r\n\t\t.equalizer {\r\n\t\t\tjustify-self: flex-start;\r\n\t\t\twidth: 2rem;\r\n\t\t\tcolor: rgb(236, 65, 65);\r\n\t\t\ttransform: translateX(-0.5rem);\r\n\t\t}\r\n\t\t.name {\r\n\t\t\tmargin-left: 1rem;\r\n\t\t\twidth: 10rem;\r\n\t\t\ttext-align: left;\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\t\t.name-red {\r\n\t\t\tmargin-left: 1rem;\r\n\t\t\twidth: 10rem;\r\n\t\t\ttext-align: left;\r\n\t\t\tcolor: rgb(236, 65, 65);\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\t\t.artists {\r\n\t\t\tmargin-left: 22rem;\r\n\t\t\twidth: 16rem;\r\n\t\t\tcolor: #b9b9b9;\r\n\t\t\ttext-align: left;\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\t\t.album {\r\n\t\t\twidth: calc(100% - 58.75rem);\r\n\t\t\tcolor: #b9b9b9;\r\n\t\t\ttext-align: left;\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\t\t.dur {\r\n\t\t\ttext-align: left;\r\n\t\t\twidth: 5rem;\r\n\t\t\tcolor: #b9b9b9;\r\n\t\t}\r\n\t}\r\n\t.status-bar {\r\n\t\twidth: 270px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\t.play-all {\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n`;\r\n\r\ninterface StatusBarProps {\r\n\tactivated: boolean;\r\n}\r\nconst StatusTab = styled.div<StatusBarProps>`\r\n\t&:hover {\r\n\t\tcursor: pointer;\r\n\t}\r\n\tcolor: ${(props) => (props.activated ? \"black\" : \"gray\")};\r\n`;\r\nconst tabMap = [\r\n\t{\r\n\t\ttype: 0,\r\n\t\ttext: \"全部\",\r\n\t},\r\n\t{\r\n\t\ttype: 7,\r\n\t\ttext: \"华语\",\r\n\t},\r\n\t{\r\n\t\ttype: 96,\r\n\t\ttext: \"欧美\",\r\n\t},\r\n\t{\r\n\t\ttype: 8,\r\n\t\ttext: \"日本\",\r\n\t},\r\n\t{\r\n\t\ttype: 16,\r\n\t\ttext: \"韩国\",\r\n\t},\r\n];\r\nconst StyledButton = styled(Button)`\r\n\twidth: 8rem;\r\n\ttext-align: center;\r\n\theight: 2rem;\r\n\tcolor: white;\r\n\tbackground-color: rgb(236, 65, 65);\r\n\tborder-radius: 1rem;\r\n\t&:hover {\r\n\t\tcolor: white;\r\n\t\tbackground-color: rgb(236, 65, 65);\r\n\t}\r\n`;\r\ninterface PlayButtonProps {\r\n\tonClick: () => void;\r\n}\r\n\r\nexport const PlayButton = ({ onClick }: PlayButtonProps) => {\r\n\treturn (\r\n\t\t<div className=\"btn\" onClick={onClick}>\r\n\t\t\t<StyledButton startIcon={<ArrowForwardIos />}>\r\n\t\t\t\t播放全部\r\n\t\t\t</StyledButton>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport const LatestSongs = () => {\r\n\tconst [songId, setSongId] = useState(0);\r\n\tconst {\r\n\t\tsongIds,\r\n\t\tsetSongIds,\r\n\t\tsetDuration,\r\n\t\tsetArtists,\r\n\t\tsetName,\r\n\t\tsetUrl,\r\n\t\tsetCurrI,\r\n\t\tcurrI\r\n\t} = useContext(MusicContext);\r\n\tconst [type, setType] = useState(0);\r\n\tconst { data: res } = useSWR(`/top/song?type=${type}`, fetcher);\r\n\tconst audio = useAudio();\r\n\r\n\tuseEffect(() => {\r\n\t\tres && setSongIds(res.data.map(({ id }: any) => id));\r\n\t}, [res]);\r\n\tconst derivedData = useMemo(() => {\r\n\t\treturn (\r\n\t\t\tres &&\r\n\t\t\tres?.data.map(\r\n\t\t\t\t(\r\n\t\t\t\t\t{ name, album, artists, id, duration }: any,\r\n\t\t\t\t\tindex: number\r\n\t\t\t\t) => {\r\n\t\t\t\t\tconst { blurPicUrl: picUrl, name: albumName } = album;\r\n\t\t\t\t\tconst artistsName = artists\r\n\t\t\t\t\t\t.map((artist: any) => artist.name)\r\n\t\t\t\t\t\t.join(\"/\");\r\n\r\n\t\t\t\t\tconst minutes = Math.floor(duration / 60000);\r\n\t\t\t\t\tconst seconds = Math.floor(duration / 1000) - minutes * 60;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tartistsName,\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\turl: picUrl,\r\n\t\t\t\t\t\tduration: `${minutes}:${\r\n\t\t\t\t\t\t\tseconds < 10 ? `0${seconds}` : seconds\r\n\t\t\t\t\t\t}`,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t);\r\n\t}, [res]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (derivedData) {\r\n\t\t\tconst item = derivedData[currI];\r\n\t\t\tconsole.log(item);\r\n\t\t\tsetName(item.name);\r\n\t\t\tsetDuration(item.duration);\r\n\t\t\tsetArtists(item.artistsName);\r\n\t\t\tsetUrl(item.url);\r\n\t\t}\r\n\t}, [currI]);\r\n\r\n\treturn (\r\n\t\t<StyledContainer>\r\n\t\t\t<div className=\"header\">\r\n\t\t\t\t<div className=\"status-bar\">\r\n\t\t\t\t\t{tabMap.map(({ type: type_, text }) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<StatusTab\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetType(type_);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tactivated={type === type_}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{text}\r\n\t\t\t\t\t\t\t</StatusTab>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PlayButton\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (derivedData) {\r\n\t\t\t\t\t\t\tconst first = derivedData[0];\r\n\t\t\t\t\t\t\tconsole.log(first);\r\n\t\t\t\t\t\t\tsetName(first.name);\r\n\t\t\t\t\t\t\tsetDuration(first.duration);\r\n\t\t\t\t\t\t\tsetArtists(first.artistsName);\r\n\t\t\t\t\t\t\tsetUrl(first.url);\r\n\t\t\t\t\t\t\tconsole.log(\"first\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres && setSongId(res.data[0].id);\r\n\t\t\t\t\t\tconst i = songIds.indexOf(songId);\r\n\t\t\t\t\t\tif (i >= 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"setcurri\");\r\n\t\t\t\t\t\t\tsetCurrI(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t{res &&\r\n\t\t\t\tres?.data.map(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t{ name, album, artists, id, duration }: any,\r\n\t\t\t\t\t\tindex: number\r\n\t\t\t\t\t) => {\r\n\t\t\t\t\t\tconst { blurPicUrl: picUrl, name: albumName } = album;\r\n\t\t\t\t\t\tconst artistsName = artists\r\n\t\t\t\t\t\t\t.map((artist: any) => artist.name)\r\n\t\t\t\t\t\t\t.join(\"/\");\r\n\r\n\t\t\t\t\t\tconst minutes = Math.floor(duration / 60000);\r\n\t\t\t\t\t\tconst seconds =\r\n\t\t\t\t\t\t\tMath.floor(duration / 1000) - minutes * 60;\r\n\t\t\t\t\t\tconst dur = `${minutes}:${\r\n\t\t\t\t\t\t\tseconds < 10 ? `0${seconds}` : seconds\r\n\t\t\t\t\t\t}`;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\tclassName=\"list-item\"\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: `${\r\n\t\t\t\t\t\t\t\t\t\tindex % 2 === 0 && \"#f5f5f5\"\r\n\t\t\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetSongId(id);\r\n\t\t\t\t\t\t\t\t\tsetName(name);\r\n\t\t\t\t\t\t\t\t\tsetArtists(artistsName);\r\n\t\t\t\t\t\t\t\t\tsetDuration(dur);\r\n\t\t\t\t\t\t\t\t\tsetUrl(picUrl);\r\n\t\t\t\t\t\t\t\t\tsetCurrI(index);\r\n\t\t\t\t\t\t\t\t\taudio.pause();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{songIds[currI] === id ? (\r\n\t\t\t\t\t\t\t\t\t<EqualizerIcon className=\"equalizer\" />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<div className=\"i\">{index}</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<StyledListPic\r\n\t\t\t\t\t\t\t\t\twidth={3.75}\r\n\t\t\t\t\t\t\t\t\theight={3.75}\r\n\t\t\t\t\t\t\t\t\tsrc={picUrl}\r\n\t\t\t\t\t\t\t\t\tbdr={0.5}\r\n\t\t\t\t\t\t\t\t></StyledListPic>\r\n\t\t\t\t\t\t\t\t{songIds[currI] === id ? (\r\n\t\t\t\t\t\t\t\t\t<div className=\"name-red\">{name}</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<div className=\"name\">{name}</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<div className=\"artists\">{artistsName}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"album\">{albumName}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"dur\">{dur}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t{!res && <CircularProgress />}\r\n\t\t</StyledContainer>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport {\r\n  Pause,\r\n  PlayArrow,\r\n  SkipNext,\r\n  SkipPrevious,\r\n  VolumeUp,\r\n} from \"@mui/icons-material\";\r\nimport { IconButton, Slider } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport useSWR from \"swr\";\r\n\r\nimport { useAudio } from \"../hooks/useAudio\";\r\n\r\nimport { MusicContext } from \"../util/context\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\n\r\nconst Layout = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .progress {\r\n    border-style: solid;\r\n    border-width: 1px;\r\n    border-color: #ff3300;\r\n    width: 0%;\r\n    position: absolute;\r\n    top: -1px;\r\n    height: 0;\r\n  }\r\n  .info {\r\n    margin-left: 1rem;\r\n    width: 20%;\r\n    height: 100%;\r\n    align-items: center;\r\n    display: flex;\r\n    text-align: left;\r\n    .info-text {\r\n      margin-left: 1rem;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n  .control {\r\n    display: flex;\r\n    height: 100%;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 60%;\r\n    flex-direction: column;\r\n    .progress {\r\n      height: 1rem;\r\n      width: 24rem;\r\n      display: inline-flex;\r\n      .MuiSlider-root {\r\n        margin-left: 1rem;\r\n        margin-right: 1rem;\r\n      }\r\n    }\r\n  }\r\n  .volume {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 20%;\r\n    justify-content: center;\r\n    .icon {\r\n      display: flex;\r\n      justify-content: center;\r\n      width: 2rem;\r\n    }\r\n    .MuiSlider-root {\r\n      width: 8rem;\r\n      .MuiSlider-thumb {\r\n        width: 1rem;\r\n        height: 1rem;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const MusicPlayer = () => {\r\n  const { name, artists, duration, url, currI, songIds, setCurrI } =\r\n    useContext(MusicContext);\r\n  const audio = useAudio();\r\n  const [enable, setEnable] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [volume, setVolume] = useState(50);\r\n  const [urlData, setUrlData] = useState<any>(undefined);\r\n  useEffect(() => {\r\n\tsetProgress(0);\r\n    (async () => {\r\n      if (currI >= 0 && songIds && songIds.length > 0) {\r\n        const songId = songIds[currI];\r\n        const res = await fetch(`/song/url?id=${songId}`).then((res) =>\r\n          res.json()\r\n        );\r\n        setUrlData(res);\r\n      }\r\n    })();\r\n  }, [songIds, currI]);\r\n\r\n  const [paused, setPaused] = useState(true);\r\n  useEffect(() => {\r\n    audio.crossOrigin = \"anonymous\";\r\n\r\n    const listener1 = () => {\r\n      setPaused(false);\r\n    };\r\n    const listener2 = () => {\r\n      setPaused(true);\r\n    };\r\n    const listener3 = () => {\r\n      console.log(\"canplay\");\r\n      setEnable(true);\r\n    };\r\n    const listener4 = () => {\r\n      setProgress(Math.floor((audio.currentTime / audio.duration) * 100));\r\n    };\r\n    audio.addEventListener(\"play\", listener1);\r\n    audio.addEventListener(\"pause\", listener2);\r\n    audio.addEventListener(\"canplay\", listener3);\r\n    audio.addEventListener(\"timeupdate\", listener4);\r\n    return () => {\r\n      audio.removeEventListener(\"play\", listener1);\r\n      audio.removeEventListener(\"pause\", listener2);\r\n      audio.removeEventListener(\"canplay\", listener3);\r\n      audio.removeEventListener(\"timeupdate\", listener4);\r\n    };\r\n  }, [urlData]);\r\n\r\n  useEffect(() => {\r\n    if (urlData && urlData.data[0]) {\r\n      audio.src = urlData.data[0].url;\r\n      setEnable(false);\r\n    }\r\n  }, [urlData]);\r\n\r\n  return (\r\n    <Layout key={JSON.stringify(urlData)}>\r\n      <div className=\"progress\" style={{ width: `${progress}%` }}></div>\r\n      <div className=\"info\">\r\n        <StyledListPic width={3} height={3} bdr={0.5} src={url} />\r\n        <div className=\"info-text\">\r\n          <div className=\"name\">{name}</div>\r\n          <div className=\"artists\">{artists}</div>\r\n        </div>\r\n      </div>\r\n      <div className=\"control\">\r\n        <div className=\"btns\">\r\n          <IconButton\r\n            className=\"prev-btn\"\r\n            onClick={() => {\r\n              audio.pause();\r\n\t\t\t  audio.src=\"\";\r\n              setPaused(true);\r\n              setProgress(0);\r\n              const newVal =\r\n                currI < 1\r\n                  ? currI - 1 + songIds.length\r\n                  : (currI - 1) % songIds.length;\r\n              setCurrI(newVal);\r\n            }}\r\n          >\r\n            <SkipPrevious></SkipPrevious>\r\n          </IconButton>\r\n\r\n          {!paused ? (\r\n            <IconButton\r\n              disabled={!enable}\r\n              className=\"play-btn\"\r\n              onClick={() => {\r\n                if (urlData && urlData.data && urlData.data[0]) {\r\n                  audio.pause();\r\n                }\r\n              }}\r\n            >\r\n              <Pause />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton\r\n              disabled={!enable}\r\n              className=\"play-btn\"\r\n              onClick={() => {\r\n                if (urlData && urlData.data && urlData.data[0]) {\r\n                  audio.play();\r\n                }\r\n              }}\r\n            >\r\n              <PlayArrow />\r\n            </IconButton>\r\n          )}\r\n          <IconButton\r\n            className=\"next-btn\"\r\n            onClick={() => {\r\n              setProgress(0);\r\n              audio.pause();\r\n\t\t\t  audio.src=\"\";\r\n              setPaused(true);\r\n              setCurrI((currI + 1) % songIds.length);\r\n            }}\r\n          >\r\n            <SkipNext></SkipNext>\r\n          </IconButton>\r\n        </div>\r\n      </div>\r\n      <Box className=\"volume\">\r\n        <VolumeUp className=\"icon\"></VolumeUp>\r\n        <Slider\r\n          onChange={(_, newVal) => {\r\n            if (typeof newVal === \"number\") {\r\n              audio.volume = newVal / 100;\r\n              setVolume(newVal);\r\n            }\r\n          }}\r\n          value={volume}\r\n        />\r\n      </Box>\r\n    </Layout>\r\n  );\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useSWR from \"swr\";\r\nimport { fetcher } from \"../util/network\";\r\nimport { VidCategories, vidCats } from \"./Categories\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nconst StyledContainer = styled.div`\r\n\tmargin-top: 1rem;\r\n\t.status {\r\n\t\tmargin-bottom: 1rem;\r\n\t\tfont-size: 16px;\r\n\t\theight: 32px;\r\n\t\twidth: 70rem;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.wrapper {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t\t.curr-cat {\r\n\t\t\twidth: 104px;\r\n\t\t\theight: 32px;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tfont-size: 16px;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-radius: 16px;\r\n\t\t\tborder-width: 1px;\r\n\t\t\tborder-color: gray;\r\n\t\t}\r\n\t\t.cat-name {\r\n\t\t\tfont-size: small;\r\n\t\t\theight: 16px;\r\n\t\t\tflex-basis: 4rem;\r\n\t\t\tuser-select: none;\r\n\t\t}\r\n\t\t.selected {\r\n\t\t\tbackground-color: rgb(253, 245, 245);\r\n\t\t\tborder-radius: 12px;\r\n\t\t\tcolor: rgb(236, 65, 65);\r\n\t\t}\r\n\t}\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t\twidth: 70rem;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: space-between;\r\n\t\talign-content: space-between;\r\n\t\t.item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: 16rem;\r\n\t\t\theight: 14rem;\r\n\t\t\tspan {\r\n\t\t\t\ttext-align: left;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    .link{\r\n        text-decoration:none;\r\n        color:black;\r\n    }\r\n`;\r\ninterface Props {}\r\n\r\nexport const Videos = (props: Props) => {\r\n\tconst [currCat, setCurrCat] = useState(\"最佳饭制\");\r\n\tconst [offset, setOffset] = useState(0);\r\n\tconst [videos, setVideos] = useState<any[]>([]);\r\n\tconst divRef = useRef<HTMLDivElement>(null);\r\n\tconst intersectionObserverRef = useRef<IntersectionObserver | null>(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst item = vidCats.find(({ name }) => name === currCat);\r\n\t\t\tconst res: any = await fetch(\r\n\t\t\t\t`/video/group?id=${item?.id}&&offset=${offset * 8}`\r\n\t\t\t).then((res) => res.json());\r\n\t\t\tconst { datas } = res;\r\n\t\t\tsetVideos((videos) => [...videos, ...datas]);\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [offset]);\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n            setVideos([]);\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst item = vidCats.find(({ name }) => name === currCat);\r\n\t\t\tconst res: any = await fetch(\r\n\t\t\t\t`/video/group?id=${item?.id}`\r\n\t\t\t).then((res) => res.json());\r\n\t\t\tconst { datas } = res;\r\n\t\t\tsetVideos(datas);\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, [currCat]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst $node = divRef.current as HTMLDivElement;\r\n\t\tintersectionObserverRef.current = new IntersectionObserver(\r\n\t\t\t(entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0] && entries[0].isIntersecting) {\r\n\t\t\t\t\tsetOffset((val) => (val >= 100 ? 100 : val + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t\tintersectionObserverRef.current.observe($node);\r\n\t\treturn () => {\r\n\t\t\ttry {\r\n\t\t\t\tintersectionObserverRef.current?.unobserve($node);\r\n\t\t\t\tintersectionObserverRef.current?.disconnect();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e); // nothing to do\r\n\t\t\t}\r\n\t\t};\r\n\t}, [divRef.current]);\r\n\treturn (\r\n\t\t<StyledContainer>\r\n\t\t\t<VidCategories\r\n\t\t\t\tcurrCat={currCat}\r\n\t\t\t\tsetCurrCat={setCurrCat}\r\n\t\t\t></VidCategories>\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{videos &&\r\n\t\t\t\t\tvideos.map(({ data }: any, index: number) => {\r\n\t\t\t\t\t\tlet { coverUrl, title, name,vid } = data;\r\n\t\t\t\t\t\tif (name) {\r\n\t\t\t\t\t\t\ttitle = name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"item\" key={title}>\r\n\t\t\t\t\t\t\t\t<StyledListPic\r\n\t\t\t\t\t\t\t\t\tsrc={coverUrl}\r\n\t\t\t\t\t\t\t\t\twidth={16}\r\n\t\t\t\t\t\t\t\t\theight={9}\r\n\t\t\t\t\t\t\t\t></StyledListPic>\r\n\t\t\t\t\t\t\t\t<div className=\"name\">\r\n\t\t\t\t\t\t\t\t\t<Link className=\"link\" to={`/videos/${vid}`}>{title}</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div ref={divRef} style={{ width: \"100%\", height: \"2rem\" }}>\r\n\t\t\t\t{loading && <CircularProgress></CircularProgress>}\r\n\t\t\t</div>\r\n\t\t</StyledContainer>\r\n\t);\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport React from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useSWR from \"swr\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nconst StyledContainer = styled.div`\r\n\tdisplay: flex;\r\n\twidth: 70rem;\r\n\t.vd {\r\n        width:620px;\r\n\t\t.title {\r\n\t\t\tcolor: black;\r\n\t\t\tfont-weight: 600;\r\n\t\t\ttext-align: left;\r\n\t\t\tmargin-bottom: 0.5rem;\r\n\t\t}\r\n\t\t.name {\r\n            overflow: hidden;\r\n\t\t\ttext-align: left;\r\n            overflow: hidden;\r\n\t\t}\r\n\t\t.play-times {\r\n\t\t\ttext-align: left;\r\n\t\t\tcolor: gray;\r\n\t\t}\r\n\t}\r\n\t.recom {\r\n\t\tmargin-left: 2rem;\r\n\t\t.title {\r\n\t\t\tfont-weight: 600;\r\n\t\t\ttext-align: left;\r\n\t\t}\r\n\t\t.list-item {\r\n\t\t\twidth: 25rem;\r\n\t\t\theight: 6rem;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\t.link {\r\n\t\t\t\tcolor: black;\r\n\t\t\t\ttext-decoration: none;\r\n\t\t\t\tmargin-left: 1rem;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\theight: 3rem;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nfunction fetcher(...urls: string[]) {\r\n\tconst f = (u: string) => fetch(u).then((r) => r.json());\r\n\r\n\tif (urls.length > 1) {\r\n\t\treturn Promise.all(urls.map(f));\r\n\t}\r\n\treturn undefined;\r\n}\r\nexport const VideoPlayer = () => {\r\n\tlet { vid } = useParams<any>();\r\n\tconst { data } = useSWR(\r\n\t\t[\r\n\t\t\t`/related/allvideo?id=${vid}`,\r\n\t\t\t`/video/detail?id=${vid}`,\r\n\t\t\t`/video/url?id=${vid}`,\r\n\t\t],\r\n\t\tfetcher\r\n\t);\r\n\tconst getPlayTimes = (times: number) => {\r\n\t\tif (times >= 100000) {\r\n\t\t\treturn `播放 ${Math.floor(times / 10000)}万次`;\r\n\t\t} else return `播放 ${times}次`;\r\n\t};\r\n\treturn (\r\n\t\t<StyledContainer>\r\n\t\t\t<div className=\"vd\">\r\n\t\t\t\t<div className=\"title\">视频详情</div>\r\n\t\t\t\t{data && data[2] && (\r\n\t\t\t\t\t<video width={620} height={355} controls>\r\n\t\t\t\t\t\t<source src={data[2].urls[0].url}></source>\r\n\t\t\t\t\t</video>\r\n\t\t\t\t)}\r\n\t\t\t\t{data && <h2 className=\"name\">{data[1].data.title}</h2>}\r\n\r\n\t\t\t\t{data && (\r\n\t\t\t\t\t<div className=\"play-times\">\r\n\t\t\t\t\t\t{getPlayTimes(data[1].data.playTime)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"recom\">\r\n\t\t\t\t<div className=\"title\">相关推荐</div>\r\n\t\t\t\t{data &&\r\n\t\t\t\t\tdata[0]?.data.map((data: any) => {\r\n\t\t\t\t\t\tconst { coverUrl, title, vid } = data;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"list-item\" key={title}>\r\n\t\t\t\t\t\t\t\t<StyledListPic\r\n\t\t\t\t\t\t\t\t\theight={5}\r\n\t\t\t\t\t\t\t\t\twidth={9}\r\n\t\t\t\t\t\t\t\t\tbdr={0.5}\r\n\t\t\t\t\t\t\t\t\tsrc={coverUrl}\r\n\t\t\t\t\t\t\t\t></StyledListPic>\r\n\t\t\t\t\t\t\t\t<Link className=\"link\" to={`/videos/${vid}`}>\r\n\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</StyledContainer>\r\n\t);\r\n};\r\n","export const getDur = (duration: number) => {\r\n\tconst minutes = Math.floor(duration / 60000);\r\n\tconst seconds = Math.floor(duration / 1000) - minutes * 60;\r\n\tconst dur = `${minutes < 10 ? `0${minutes}` : `${minutes}`}:${\r\n\t\tseconds < 10 ? `0${seconds}` : seconds\r\n\t}`;\r\n    return dur;\r\n};\r\n","import styled from \"@emotion/styled\";\r\nimport { Avatar, CircularProgress } from \"@mui/material\";\r\nimport { useContext, useEffect, useMemo } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport useSWR from \"swr\";\r\nimport { getDur } from \"../util/math\";\r\nimport { fetcher } from \"../util/network\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport { StyledListPic } from \"./RecommendList\";\r\nimport { MusicContext } from \"../util/context\";\r\nimport { useAudio } from \"../hooks/useAudio\";\r\nconst StyledDiv = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t.header {\r\n\t\tmargin-left: 2rem;\r\n\t\tdisplay: flex;\r\n\t\t.info {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-align: left;\r\n\t\t\tmargin-left: 1rem;\r\n\t\t\t.creator {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tcolor: gray;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nconst StyledTable = styled(Table)`\r\n\twidth: 100%;\r\n\tcolor: black;\r\n\t.table-body {\r\n\t\twidth: 100%;\r\n\t}\r\n\t.table-row {\r\n\t\t&:hover {\r\n\t\t\tbackground: #e4e3e378;\r\n\t\t}\r\n\t\twidth: 100%;\r\n\t\t.i {\r\n\t\t\tpadding-left: 2rem;\r\n\t\t\twidth: 4rem;\r\n\t\t\tcolor: gray;\r\n\t\t}\r\n\t\t.name {\r\n\t\t\twidth: 36%;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t\t.r-name {\r\n\t\t\twidth: 36%;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: rgb(234, 54, 54);\r\n\t\t}\r\n\t\t.artist {\r\n\t\t\twidth: 17%;\r\n\t\t\tcolor: gray;\r\n\t\t}\r\n\t\t.album {\r\n\t\t\twidth: 25%;\r\n\t\t\tcolor: gray;\r\n\t\t\tdiv {\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.dur {\r\n\t\t\twidth: calc(100% - 6rem - 36% - 17% - 20%);\r\n\t\t\tcolor: gray;\r\n\t\t\ttext-align: right;\r\n\t\t\tpadding-right: 2rem;\r\n\t\t}\r\n\t}\r\n`;\r\nconst getTrackIdsUrl = (data: any) =>\r\n\tdata?.playlist?.trackIds\r\n\t\t.map(({ id }: any) => id)\r\n\t\t.slice(0, 200)\r\n\t\t.reduce((accumulator: string, currentValue: string) => {\r\n\t\t\treturn accumulator + currentValue + \",\";\r\n\t\t}, \"/song/detail?ids=\")\r\n\t\t.slice(0, -1);\r\nconst getSongIds = (data: any) =>\r\n\tdata?.playlist?.trackIds.map(({ id }: any) => id).slice(0, 200);\r\nexport const MusicList = () => {\r\n\tconst { id } = useParams<any>();\r\n\tconst { data: listData } = useSWR(`/playlist/detail?id=${id}`, fetcher);\r\n\tconst trackIdsUrl = useMemo(() => getTrackIdsUrl(listData), [listData]);\r\n\tconst { data: tracks } = useSWR(trackIdsUrl, fetcher);\r\n\tconst {\r\n\t\tsetArtists,\r\n\t\tsetDuration,\r\n\t\tsetName,\r\n\t\tsetUrl,\r\n\t\tsetSongIds,\r\n\t\tsetCurrI,\r\n\t\tcurrI,\r\n\t} = useContext(MusicContext);\r\n\r\n\tconst audio = useAudio();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tracks) {\r\n\t\t\tconst song = tracks.songs[currI];\r\n\t\t\tconst { name, al: album, ar: artists, dt: duration } = song;\r\n\t\t\tconst albumPicUrl = album.picUrl;\r\n\t\t\tconst artistName = artists[0].name;\r\n\t\t\tconst dur = getDur(duration);\r\n\t\t\tsetUrl(albumPicUrl);\r\n\t\t\tsetName(name);\r\n\t\t\tsetArtists(artistName);\r\n\t\t\tsetDuration(dur);\r\n            setSongIds(getSongIds(listData));\r\n\t\t}\r\n\t}, [currI]);\r\n\r\n\treturn (\r\n\t\t<StyledDiv>\r\n\t\t\t{!listData && <CircularProgress />}\r\n\t\t\t{listData && (\r\n\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t<StyledListPic\r\n\t\t\t\t\t\twidth={12}\r\n\t\t\t\t\t\theight={12}\r\n\t\t\t\t\t\tbdr={0.5}\r\n\t\t\t\t\t\tsrc={listData.playlist.coverImgUrl}\r\n\t\t\t\t\t></StyledListPic>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t<h3>{listData.playlist.name}</h3>\r\n\t\t\t\t\t\t<div className=\"creator\">\r\n\t\t\t\t\t\t\t<Avatar src={listData.playlist.creator.avatarUrl} />\r\n\t\t\t\t\t\t\t{listData.playlist.creator.nickname}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<StyledTable>\r\n\t\t\t\t{(!listData || !tracks) && <CircularProgress />}\r\n\t\t\t\t<TableHead className=\"table-head\">\r\n\t\t\t\t\t<TableCell></TableCell>\r\n\t\t\t\t\t<TableCell>音乐标题</TableCell>\r\n\t\t\t\t\t<TableCell>歌手</TableCell>\r\n\t\t\t\t\t<TableCell>专辑</TableCell>\r\n\t\t\t\t\t<TableCell align=\"right\" sx={{ paddingRight: \"2rem\" }}>\r\n\t\t\t\t\t\t时长\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody className=\"table-body\">\r\n\t\t\t\t\t{listData &&\r\n\t\t\t\t\t\ttracks &&\r\n\t\t\t\t\t\ttracks.songs.map((song: any, index: number) => {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\tal: album,\r\n\t\t\t\t\t\t\t\tar: artists,\r\n\t\t\t\t\t\t\t\tdt: duration,\r\n\t\t\t\t\t\t\t} = song;\r\n\t\t\t\t\t\t\tconst albumPicUrl = album.picUrl;\r\n\t\t\t\t\t\t\tconst albumName = album.name;\r\n\t\t\t\t\t\t\tconst artistName = artists[0].name;\r\n\t\t\t\t\t\t\tconst dur = getDur(duration);\r\n\t\t\t\t\t\t\tconst handleClick = () => {\r\n\t\t\t\t\t\t\t\tsetArtists(artistName);\r\n\t\t\t\t\t\t\t\tsetDuration(dur);\r\n\t\t\t\t\t\t\t\tsetUrl(albumPicUrl);\r\n\t\t\t\t\t\t\t\tsetName(name);\r\n\t\t\t\t\t\t\t\tsetSongIds(getSongIds(listData));\r\n\t\t\t\t\t\t\t\tsetCurrI(index);\r\n\t\t\t\t\t\t\t\taudio.pause();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow\r\n\t\t\t\t\t\t\t\t\tclassName=\"table-row\"\r\n\t\t\t\t\t\t\t\t\tkey={name}\r\n\t\t\t\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<TableCell className=\"i\">\r\n\t\t\t\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell\r\n\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\tcurrI === index ? \"r-name\" : \"name\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell className=\"artist\">\r\n\t\t\t\t\t\t\t\t\t\t{artistName}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell className=\"album\">\r\n\t\t\t\t\t\t\t\t\t\t<div>{albumName}</div>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell className=\"dur\">{dur}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</StyledTable>\r\n\t\t</StyledDiv>\r\n\t);\r\n};\r\n","import React, {\r\n\tuseRef,\r\n\tuseState,\r\n} from \"react\";\r\nimport \"./App.css\";\r\nimport { ContentWrapper } from \"./Components/ContentWrapper\";\r\nimport { Footer } from \"./Components/Footer\";\r\nimport { Header, HeaderContent } from \"./Components/Header\";\r\nimport { Layout } from \"./Components/Layout\";\r\nimport { ScrollContent } from \"./Components/ScrollContent\";\r\nimport { Sider } from \"./Components/Sider\";\r\nimport {\r\n\tcheckCookie,\r\n\tlogin,\r\n\tLoginStatusContext,\r\n\tlogout,\r\n} from \"./hooks/useAuth\";\r\nimport {\r\n\tRoute,\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRedirect,\r\n} from \"react-router-dom\";\r\nimport { red } from \"@mui/material/colors\";\r\nimport { styled } from \"@mui/system\";\r\nimport {\r\n\tAvatar,\r\n\tBox,\r\n\tButton,\r\n\tcreateTheme,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogContentText,\r\n\tDialogTitle,\r\n\tTextField,\r\n\tThemeProvider,\r\n\tTypography,\r\n} from \"@mui/material\";\r\nimport { LoginOutlined, LogoutOutlined } from \"@mui/icons-material\";\r\nimport useSWR from \"swr\";\r\nimport { useMount } from \"./hooks/useMount\";\r\nimport { Carousel } from \"./Components/Carousel\";\r\nimport { fetcher } from \"./util/network\";\r\nimport { StyledArrowLeft, StyledArrowRight } from \"./Components/Arrow\";\r\nimport { Title } from \"./Components/Title\";\r\nimport { RecommendList } from \"./Components/RecommendList\";\r\nimport { PrivateContent } from \"./Components/PrivateContent\";\r\nimport { NewSongsList } from \"./Components/NewSongsList\";\r\nimport { RecommendMv } from \"./Components/RecommendMv\";\r\nimport { RecommendTabs } from \"./Components/RecommendTabs\";\r\nimport { MusicLists } from \"./Components/MusicLists\";\r\nimport { LatestSongs } from \"./Components/LatestSongs\";\r\nimport { MusicContext } from \"./util/context\";\r\nimport { MusicPlayer } from \"./Components/MusicPlayer\";\r\nimport { Videos } from \"./Components/Videos\";\r\nimport { VideoPlayer } from \"./Components/VideoPlayer\";\r\nimport { MusicList } from \"./Components/MusicList\";\r\n\r\nconst StyledAvatar = styled(Avatar)`\r\n\tmargin-right: 8px;\r\n`;\r\n\r\nconst StyledNickName = styled(Typography)`\r\n\tcolor: white;\r\n\twidth: 64px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n\tcolor: white;\r\n`;\r\nconst theme = createTheme({\r\n\tpalette: {\r\n\t\tprimary: red,\r\n\t},\r\n});\r\n\r\nfunction App() {\r\n\tconst phone = useRef(\"\");\r\n\tconst psw = useRef(\"\");\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [errTextField, setErrTextField] = useState(false);\r\n\tconst [loginStatus, setLoginStatus] = useState(checkCookie());\r\n\tconst [uid, setUid] = useState<number | null>(null);\r\n\tconst { data: user } = useSWR(\r\n\t\t() => `/user/detail?uid=${uid}`,\r\n\t\tfetcher\r\n\t);\r\n\tconst [songIds, setSongIds] = useState<number[]>([]);\r\n\tconst [artists, setArtists] = useState<string>(\"\");\r\n\tconst [duration, setDuration] = useState<string>(\"\");\r\n\tconst [name, setName] = useState<string>(\"\");\r\n\tconst [url, setUrl] = useState<string>(\"\");\r\n\tconst [currI, setCurrI] = useState(-1);\r\n\r\n\tuseMount(() => {\r\n\t\tconst cookie_ = window.localStorage.getItem(\"cookie\");\r\n\t\tconst uid_ = window.localStorage.getItem(\"uid\");\r\n\t\tif (cookie_ && uid_) {\r\n\t\t\tdocument.cookie = cookie_;\r\n\t\t\tsetLoginStatus(true);\r\n\t\t\tsetOpen(false);\r\n\t\t\tsetUid(parseInt(uid_));\r\n\t\t} else {\r\n\t\t\tsetLoginStatus(false);\r\n\t\t\tsetOpen(true);\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n\r\n\tconst handleLogin = () => {\r\n\t\tlogin(phone.current, psw.current).then((res) => {\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetOpen(false);\r\n\t\t\t\tsetLoginStatus(true);\r\n\t\t\t\tsetErrTextField(false);\r\n\t\t\t\tsetUid(res?.account?.id);\r\n\t\t\t\twindow.localStorage.setItem(\r\n\t\t\t\t\t\"uid\",\r\n\t\t\t\t\tJSON.stringify(res?.account?.id)\r\n\t\t\t\t);\r\n\t\t\t\twindow.localStorage.setItem(\"cookie\", document.cookie);\r\n\t\t\t\t// console.log(document.cookie);\r\n\t\t\t} else {\r\n\t\t\t\tsetErrTextField(true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleLogout = () => {\r\n\t\tlogout().then((res) => {\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetLoginStatus(false);\r\n\t\t\t\tsetUid(null);\r\n\t\t\t\twindow.localStorage.removeItem(\"uid\");\r\n\t\t\t\twindow.localStorage.removeItem(\"cookie\");\r\n\t\t\t\t// window.location.reload();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tconst handlePhoneChange: React.ChangeEventHandler<\r\n\t\tHTMLInputElement | HTMLTextAreaElement\r\n\t> = (e) => {\r\n\t\tphone.current = e.target.value;\r\n\t};\r\n\r\n\tconst handlePswChange: React.ChangeEventHandler<\r\n\t\tHTMLInputElement | HTMLTextAreaElement\r\n\t> = (e) => {\r\n\t\tpsw.current = e.target.value;\r\n\t};\r\n\r\n\tconst renderHeader = () => {\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t<HeaderContent>\r\n\t\t\t\t\t<div className={\"logo\"}>\r\n\t\t\t\t\t\t<img src=\"/logo_netease.png\" alt={\"\"} height={64} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!loginStatus ? (\r\n\t\t\t\t\t\t<StyledButton\r\n\t\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t\t\tstartIcon={<LoginOutlined />}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t登录\r\n\t\t\t\t\t\t</StyledButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<StyledAvatar\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\tsrc={user?.profile?.avatarUrl}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<StyledNickName variant=\"body2\">\r\n\t\t\t\t\t\t\t\t{user?.profile?.nickname}\r\n\t\t\t\t\t\t\t</StyledNickName>\r\n\t\t\t\t\t\t\t<StyledButton\r\n\t\t\t\t\t\t\t\tonClick={handleLogout}\r\n\t\t\t\t\t\t\t\tstartIcon={<LogoutOutlined />}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t登出\r\n\t\t\t\t\t\t\t</StyledButton>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</HeaderContent>\r\n\t\t\t</Header>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<LoginStatusContext.Provider value={{ loginStatus, uid }}>\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t\t{renderHeader()}\r\n\t\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t\t<Sider></Sider>\r\n\t\t\t\t\t\t\t<Box sx={{ flexBasis: \"256px\",\"@media screen and (max-width:600px)\":{\r\n                                display:\"none\"\r\n                            } }}></Box>\r\n\t\t\t\t\t\t\t<ContentWrapper>\r\n\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"/findmusic\">\r\n\t\t\t\t\t\t\t\t\t\t<RecommendTabs></RecommendTabs>\r\n\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"*\">{null}</Route>\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t<ScrollContent>\r\n\t\t\t\t\t\t\t\t\t<MusicContext.Provider\r\n\t\t\t\t\t\t\t\t\t\tvalue={{\r\n\t\t\t\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\t\t\t\t\tartists,\r\n\t\t\t\t\t\t\t\t\t\t\tduration,\r\n\t\t\t\t\t\t\t\t\t\t\tsetSongIds,\r\n\t\t\t\t\t\t\t\t\t\t\tsongIds,\r\n\t\t\t\t\t\t\t\t\t\t\tcurrI,\r\n\t\t\t\t\t\t\t\t\t\t\tsetArtists,\r\n\t\t\t\t\t\t\t\t\t\t\tsetDuration,\r\n\t\t\t\t\t\t\t\t\t\t\tsetUrl,\r\n\t\t\t\t\t\t\t\t\t\t\tsetName,\r\n\t\t\t\t\t\t\t\t\t\t\tsetCurrI,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/findmusic\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/findmusic/personalrecommend\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Carousel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdots: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfinite: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslidesToShow: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslidesToScroll: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoplay: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoplaySpeed: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextArrow: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledArrowRight />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevArrow: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StyledArrowLeft />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Title>推荐歌单</Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RecommendList />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Title>独家放送</Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PrivateContent />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Title>最新音乐</Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NewSongsList />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Title>推荐MV</Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RecommendMv />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/findmusic/lists\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MusicLists></MusicLists>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/findmusic/newsongs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<LatestSongs></LatestSongs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/findmusic/personalrecommend\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t></Redirect>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/videos\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath=\"/videos/:vid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildren={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoPlayer />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Route path=\"/videos\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Videos></Videos>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"/list/:id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchildren={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MusicList></MusicList>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpathname:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/findmusic/personalrecommend\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate: { from: \"/\" },\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t></Redirect>\r\n\t\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t\t</MusicContext.Provider>\r\n\t\t\t\t\t\t\t\t</ScrollContent>\r\n\t\t\t\t\t\t\t</ContentWrapper>\r\n\t\t\t\t\t\t</Layout>\r\n\r\n\t\t\t\t\t\t<Footer>\r\n\t\t\t\t\t\t\t<MusicContext.Provider\r\n\t\t\t\t\t\t\t\tvalue={{\r\n\t\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\t\t\tartists,\r\n\t\t\t\t\t\t\t\t\tduration,\r\n\t\t\t\t\t\t\t\t\tsetSongIds,\r\n\t\t\t\t\t\t\t\t\tsongIds,\r\n\t\t\t\t\t\t\t\t\tsetArtists,\r\n\t\t\t\t\t\t\t\t\tsetDuration,\r\n\t\t\t\t\t\t\t\t\tsetUrl,\r\n\t\t\t\t\t\t\t\t\tsetName,\r\n\t\t\t\t\t\t\t\t\tcurrI,\r\n\t\t\t\t\t\t\t\t\tsetCurrI,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MusicPlayer></MusicPlayer>\r\n\t\t\t\t\t\t\t</MusicContext.Provider>\r\n\t\t\t\t\t\t</Footer>\r\n\t\t\t\t\t\t<Dialog open={open}>\r\n\t\t\t\t\t\t\t<DialogTitle>登录</DialogTitle>\r\n\t\t\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\t\t\t\t请输入网易云音乐的手机号与密码\r\n\t\t\t\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"手机号\"\r\n\t\t\t\t\t\t\t\t\ttype=\"phone\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvariant=\"standard\"\r\n\t\t\t\t\t\t\t\t\tonChange={handlePhoneChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\terror={errTextField}\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"密码\"\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvariant=\"standard\"\r\n\t\t\t\t\t\t\t\t\tonChange={handlePswChange}\r\n\t\t\t\t\t\t\t\t\thelperText={errTextField ? \"登录失败\" : \"\"}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button onClick={handleLogin}>提交</Button>\r\n\t\t\t\t\t\t\t\t<Button onClick={handleClose}>取消</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Dialog>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Router>\r\n\t\t\t</ThemeProvider>\r\n\t\t</LoginStatusContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { useEffect } from \"react\";\r\n\r\nexport function useMount(fn:()=>void){\r\n    useEffect(() => {\r\n        fn();\r\n    }, [])\r\n}\r\n\r\nexport function useUnmount(fn:()=>void){\r\n    useEffect(() => {\r\n        return fn;\r\n    }, [])\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}